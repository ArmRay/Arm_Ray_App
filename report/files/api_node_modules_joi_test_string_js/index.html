<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Plato - api/node_modules/joi/test/string.js</title>

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="author" content="">

  <!--[if lt IE 9]>
  <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->

  <link href="../../assets/css/vendor/morris.css" rel="stylesheet">
  <link href="../../assets/css/vendor/bootstrap.css" rel="stylesheet">
  <link href="../../assets/css/vendor/font-awesome.css" rel="stylesheet">
  <link href="../../assets/css/vendor/codemirror.css" rel="stylesheet">
  <link href="../../assets/css/plato.css" rel="stylesheet">
  <link href="../../assets/css/plato-file.css" rel="stylesheet">

</head>

<body>

<div class="navbar navbar-fixed-top">
  <div class="container">
    <a class="navbar-brand" href="http://github.com/es-analysis/plato">Plato on Github</a>
    <ul class="nav navbar-nav">
      <li>
        <a href="../../index.html">Report Home</a>
      </li>
    </ul>
  </div>
</div>

<div class="jumbotron">
  <div class="container">
    <h1>api/node_modules/joi/test/string.js</h1>
  </div>
</div>

<div class="container aggregate-stats">
  <div class="row">
    <div class="col-md-6">
      <h2 class="header">Maintainability <a href="http://blogs.msdn.com/b/codeanalysis/archive/2007/11/20/maintainability-index-range-and-meaning.aspx"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="A value between 0 and 100 that represents the relative ease of maintaining the code. A high value means better maintainability." data-original-title="Maintainability Index"  data-container="body"></i></a></h2>
      <p class="stat">75.86</p>
    </div>
    <div class="col-md-6">
      <h2 class="header">Lines of code <i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Source Lines of Code / Logical Lines of Code" data-original-title="SLOC/LSLOC" data-container="body"></i></h2>
      <p class="stat">3035</p>
    </div>
  </div>
  <div class="row historical">
    <div class="col-md-6">
      <p id="chart_historical_maint" class="chart"></p>
    </div>
    <div class="col-md-6">
      <p id="chart_historical_sloc" class="chart"></p>
    </div>
  </div>
  <div class="row">
    <div class="col-md-6">
      <h2 class="header">Difficulty  <a href="http://en.wikipedia.org/wiki/Halstead_complexity_measures"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="The difficulty measure is related to the difficulty of the program to write or understand." data-original-title="Difficulty" data-container="body"></i></a></h2>
      <p class="stat">45.32</p>
    </div>
    <div class="col-md-6">
      <h2 class="header">Estimated Errors  <a href="http://en.wikipedia.org/wiki/Halstead_complexity_measures"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Halstead's delivered bugs is an estimate for the number of errors in the implementation." data-original-title="Delivered Bugs" data-container="body"></i></a></h2>
      <p class="stat">36.08</p>
    </div>
  </div>
</div>

<div class="container charts">
  <div class="row">
    <h2 class="header">Function weight</h2>
  </div>
  <div class="row">
    <div class="col-md-6">
      <h3 class="chart-header">By Complexity <a href="http://en.wikipedia.org/wiki/Cyclomatic_complexity"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="This metric counts the number of distinct paths through a block of code. Lower values are better." data-original-title="Cyclomatic Complexity" data-container="body"></i></a></h3>
      <div id="fn-by-complexity" class="stat"></div>
    </div>
    <div class="col-md-6">
      <h3 class="chart-header">By SLOC  <i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Source Lines of Code / Logical Lines of Code" data-original-title="SLOC/LSLOC" data-container="body"></i></h3>
      <div id="fn-by-sloc" class="stat"></div>
    </div>
  </div>
</div>

<div class="container">
  <div class="row">
    <textarea id="file-source" class="col-md-12">// Load modules

var Lab = require(&#039;lab&#039;);
var Code = require(&#039;code&#039;);
var Joi = require(&#039;../lib&#039;);
var Helper = require(&#039;./helper&#039;);


// Declare internals

var internals = {};


// Test shortcuts

var lab = exports.lab = Lab.script();
var describe = lab.describe;
var it = lab.it;
var expect = Code.expect;


describe(&#039;string&#039;, function () {

    it(&#039;fails on boolean&#039;, function (done) {

        var schema = Joi.string();
        Helper.validate(schema, [
            [true, false],
            [false, false]
        ], done);
    });

    describe(&#039;#valid&#039;, function () {

        it(&#039;should throw error on input not matching type&#039;, function (done) {

            expect(function () {

                Joi.string().valid({});
            }).to.throw();
            done();
        });

        it(&#039;should not throw on input matching type&#039;, function (done) {

            expect(function () {

                Joi.string().valid(&#039;joi&#039;);
            }).to.not.throw();
            done();
        });

        it(&#039;validates case sensitive values&#039;, function (done) {

            Helper.validate(Joi.string().valid(&#039;a&#039;, &#039;b&#039;), [
                [&#039;a&#039;, true],
                [&#039;b&#039;, true],
                [&#039;A&#039;, false],
                [&#039;B&#039;, false]
            ], done);
        });

        it(&#039;validates case insensitive values&#039;, function (done) {

            Helper.validate(Joi.string().valid(&#039;a&#039;, &#039;b&#039;).insensitive(), [
                [&#039;a&#039;, true],
                [&#039;b&#039;, true],
                [&#039;A&#039;, true],
                [&#039;B&#039;, true],
                [4, false]
            ], done);
        });

        it(&#039;validates case insensitive values with non-strings&#039;, function (done) {

            Helper.validate(Joi.string().valid(&#039;a&#039;, &#039;b&#039;, 5).insensitive(), [
                [&#039;a&#039;, true],
                [&#039;b&#039;, true],
                [&#039;A&#039;, true],
                [&#039;B&#039;, true],
                [4, false],
                [5, true]
            ], done);
        });
    });

    describe(&#039;#invalid&#039;, function () {

        it(&#039;should throw error on input not matching type&#039;, function (done) {

            expect(function () {

                Joi.string().invalid({});
            }).to.throw();
            done();
        });

        it(&#039;should not throw on input matching type&#039;, function (done) {

            expect(function () {

                Joi.string().invalid(&#039;joi&#039;);
            }).to.not.throw();
            done();
        });

        it(&#039;invalidates case sensitive values&#039;, function (done) {

            Helper.validate(Joi.string().invalid(&#039;a&#039;, &#039;b&#039;), [
                [&#039;a&#039;, false],
                [&#039;b&#039;, false],
                [&#039;A&#039;, true],
                [&#039;B&#039;, true]
            ], done);
        });

        it(&#039;invalidates case insensitive values&#039;, function (done) {

            Helper.validate(Joi.string().invalid(&#039;a&#039;, &#039;b&#039;).insensitive(), [
                [&#039;a&#039;, false],
                [&#039;b&#039;, false],
                [&#039;A&#039;, false],
                [&#039;B&#039;, false]
            ], done);
        });
    });

    describe(&#039;#min&#039;, function () {

        it(&#039;throws when limit is not a number&#039;, function (done) {

            expect(function () {

                Joi.string().min(&#039;a&#039;);
            }).to.throw(&#039;limit must be a positive integer or reference&#039;);
            done();
        });

        it(&#039;throws when limit is not an integer&#039;, function (done) {

            expect(function () {

                Joi.string().min(1.2);
            }).to.throw(&#039;limit must be a positive integer or reference&#039;);
            done();
        });

        it(&#039;throws when limit is not a positive integer&#039;, function (done) {

            expect(function () {

                Joi.string().min(-1);
            }).to.throw(&#039;limit must be a positive integer or reference&#039;);
            done();
        });

        it(&#039;enforces a limit using byte count&#039;, function (done) {

            var schema = Joi.string().min(2, &#039;utf8&#039;);
            Helper.validate(schema, [
                [&#039;\u00bd&#039;, true],
                [&#039;a&#039;, false]
            ], done);
        });

        it(&#039;accepts references as min length&#039;, function (done) {

            var schema = Joi.object({ a: Joi.number(), b: Joi.string().min(Joi.ref(&#039;a&#039;), &#039;utf8&#039;) });
            Helper.validate(schema, [
                [{ a: 2, b: &#039;\u00bd&#039; }, true],
                [{ a: 2, b: &#039;a&#039; }, false],
                [{ a: 2, b: &#039;a&#039; }, false, null, &#039;child &quot;b&quot; fails because [&quot;b&quot; length must be at least 2 characters long]&#039;]
            ], done);
        });

        it(&#039;accepts context references as min length&#039;, function (done) {

            var schema = Joi.object({ b: Joi.string().min(Joi.ref(&#039;$a&#039;), &#039;utf8&#039;) });
            Helper.validate(schema, [
                [{ b: &#039;\u00bd&#039; }, true, { context: { a: 2 } }],
                [{ b: &#039;a&#039; }, false, { context: { a: 2 } }],
                [{ b: &#039;a&#039; }, false, { context: { a: 2 } }, &#039;child &quot;b&quot; fails because [&quot;b&quot; length must be at least 2 characters long]&#039;]
            ], done);
        });

        it(&#039;errors if reference is not a number&#039;, function (done) {

            var schema = Joi.object({ a: Joi.any(), b: Joi.string().min(Joi.ref(&#039;a&#039;), &#039;utf8&#039;) });

            Helper.validate(schema, [
                [{ a: &#039;Hi there&#039;, b: &#039;\u00bd&#039; }, false, null, &#039;child &quot;b&quot; fails because [&quot;b&quot; references &quot;a&quot; which is not a number]&#039;]
            ], done);
        });

        it(&#039;errors if context reference is not a number&#039;, function (done) {

            var schema = Joi.object({ b: Joi.string().min(Joi.ref(&#039;$a&#039;), &#039;utf8&#039;) });

            Helper.validate(schema, [
                [{ b: &#039;\u00bd&#039; }, false, { context: { a: &#039;Hi there&#039; } }, &#039;child &quot;b&quot; fails because [&quot;b&quot; references &quot;a&quot; which is not a number]&#039;]
            ], done);
        });
    });

    describe(&#039;#max&#039;, function () {

        it(&#039;throws when limit is not a number&#039;, function (done) {

            expect(function () {

                Joi.string().max(&#039;a&#039;);
            }).to.throw(&#039;limit must be a positive integer or reference&#039;);
            done();
        });

        it(&#039;throws when limit is not an integer&#039;, function (done) {

            expect(function () {

                Joi.string().max(1.2);
            }).to.throw(&#039;limit must be a positive integer or reference&#039;);
            done();
        });

        it(&#039;throws when limit is not a positive integer&#039;, function (done) {

            expect(function () {

                Joi.string().max(-1);
            }).to.throw(&#039;limit must be a positive integer or reference&#039;);
            done();
        });

        it(&#039;enforces a limit using byte count&#039;, function (done) {

            var schema = Joi.string().max(1, &#039;utf8&#039;);
            Helper.validate(schema, [
                [&#039;\u00bd&#039;, false],
                [&#039;a&#039;, true]
            ], done);
        });

        it(&#039;accepts references as min length&#039;, function (done) {

            var schema = Joi.object({ a: Joi.number(), b: Joi.string().max(Joi.ref(&#039;a&#039;), &#039;utf8&#039;) });
            Helper.validate(schema, [
                [{ a: 2, b: &#039;\u00bd&#039; }, true],
                [{ a: 2, b: &#039;three&#039; }, false],
                [{ a: 2, b: &#039;three&#039; }, false, null, &#039;child &quot;b&quot; fails because [&quot;b&quot; length must be less than or equal to 2 characters long]&#039;]
            ], done);
        });

        it(&#039;accepts context references as min length&#039;, function (done) {

            var schema = Joi.object({ b: Joi.string().max(Joi.ref(&#039;$a&#039;), &#039;utf8&#039;) });
            Helper.validate(schema, [
                [{ b: &#039;\u00bd&#039; }, true, { context: { a: 2 } }],
                [{ b: &#039;three&#039; }, false, { context: { a: 2 } }],
                [{ b: &#039;three&#039; }, false, { context: { a: 2 } }, &#039;child &quot;b&quot; fails because [&quot;b&quot; length must be less than or equal to 2 characters long]&#039;]
            ], done);
        });

        it(&#039;errors if reference is not a number&#039;, function (done) {

            var schema = Joi.object({ a: Joi.any(), b: Joi.string().max(Joi.ref(&#039;a&#039;), &#039;utf8&#039;) });

            Helper.validate(schema, [
                [{ a: &#039;Hi there&#039;, b: &#039;\u00bd&#039; }, false, null, &#039;child &quot;b&quot; fails because [&quot;b&quot; references &quot;a&quot; which is not a number]&#039;]
            ], done);
        });

        it(&#039;errors if context reference is not a number&#039;, function (done) {

            var schema = Joi.object({ b: Joi.string().max(Joi.ref(&#039;$a&#039;), &#039;utf8&#039;) });

            Helper.validate(schema, [
                [{ b: &#039;\u00bd&#039; }, false, { context: { a: &#039;Hi there&#039; } }, &#039;child &quot;b&quot; fails because [&quot;b&quot; references &quot;a&quot; which is not a number]&#039;]
            ], done);
        });
    });

    describe(&#039;#creditCard&#039;, function () {

        it(&#039;should validate credit card&#039;, function (done) {

            var t = Joi.string().creditCard();
            t.validate(&#039;4111111111111112&#039;, function (err, value) {

                expect(err.message).to.equal(&#039;&quot;value&quot; must be a credit card&#039;);

                Helper.validate(t, [
                    [&#039;378734493671000&#039;, true],  // american express
                    [&#039;371449635398431&#039;, true],  // american express
                    [&#039;378282246310005&#039;, true],  // american express
                    [&#039;341111111111111&#039;, true],  // american express
                    [&#039;5610591081018250&#039;, true], // australian bank
                    [&#039;5019717010103742&#039;, true], // dankort pbs
                    [&#039;38520000023237&#039;, true],   // diners club
                    [&#039;30569309025904&#039;, true],   // diners club
                    [&#039;6011000990139424&#039;, true], // discover
                    [&#039;6011111111111117&#039;, true], // discover
                    [&#039;6011601160116611&#039;, true], // discover
                    [&#039;3566002020360505&#039;, true], // jbc
                    [&#039;3530111333300000&#039;, true], // jbc
                    [&#039;5105105105105100&#039;, true], // mastercard
                    [&#039;5555555555554444&#039;, true], // mastercard
                    [&#039;5431111111111111&#039;, true], // mastercard
                    [&#039;6331101999990016&#039;, true], // switch/solo paymentech
                    [&#039;4222222222222&#039;, true],    // visa
                    [&#039;4012888888881881&#039;, true], // visa
                    [&#039;4111111111111111&#039;, true], // visa
                    [&#039;4111111111111112&#039;, false],
                    [null, false]
                ], done);
            });
        });
    });

    describe(&#039;#length&#039;, function () {

        it(&#039;throws when limit is not a number&#039;, function (done) {

            expect(function () {

                Joi.string().length(&#039;a&#039;);
            }).to.throw(&#039;limit must be a positive integer or reference&#039;);
            done();
        });

        it(&#039;throws when limit is not an integer&#039;, function (done) {

            expect(function () {

                Joi.string().length(1.2);
            }).to.throw(&#039;limit must be a positive integer or reference&#039;);
            done();
        });

        it(&#039;throws when limit is not a positive integer&#039;, function (done) {

            expect(function () {

                Joi.string().length(-42);
            }).to.throw(&#039;limit must be a positive integer or reference&#039;);
            done();
        });

        it(&#039;enforces a limit using byte count&#039;, function (done) {

            var schema = Joi.string().length(2, &#039;utf8&#039;);
            Helper.validate(schema, [
                [&#039;\u00bd&#039;, true],
                [&#039;a&#039;, false]
            ], done);
        });

        it(&#039;accepts references as length&#039;, function (done) {

            var schema = Joi.object({ a: Joi.number(), b: Joi.string().length(Joi.ref(&#039;a&#039;), &#039;utf8&#039;) });
            Helper.validate(schema, [
                [{ a: 2, b: &#039;\u00bd&#039; }, true],
                [{ a: 2, b: &#039;a&#039; }, false],
                [{ a: 2, b: &#039;a&#039; }, false, null, &#039;child &quot;b&quot; fails because [&quot;b&quot; length must be 2 characters long]&#039;]
            ], done);
        });

        it(&#039;accepts context references as length&#039;, function (done) {

            var schema = Joi.object({ b: Joi.string().length(Joi.ref(&#039;$a&#039;), &#039;utf8&#039;) });
            Helper.validate(schema, [
                [{ b: &#039;\u00bd&#039; }, true, { context: { a: 2 } }],
                [{ b: &#039;a&#039; }, false, { context: { a: 2 } }],
                [{ b: &#039;a&#039; }, false, { context: { a: 2 } }, &#039;child &quot;b&quot; fails because [&quot;b&quot; length must be 2 characters long]&#039;]
            ], done);
        });

        it(&#039;errors if reference is not a number&#039;, function (done) {

            var schema = Joi.object({ a: Joi.any(), b: Joi.string().length(Joi.ref(&#039;a&#039;), &#039;utf8&#039;) });

            Helper.validate(schema, [
                [{ a: &#039;Hi there&#039;, b: &#039;\u00bd&#039; }, false, null, &#039;child &quot;b&quot; fails because [&quot;b&quot; references &quot;a&quot; which is not a number]&#039;]
            ], done);
        });

        it(&#039;errors if context reference is not a number&#039;, function (done) {

            var schema = Joi.object({ a: Joi.any(), b: Joi.string().length(Joi.ref(&#039;$a&#039;), &#039;utf8&#039;) });

            Helper.validate(schema, [
                [{ b: &#039;\u00bd&#039; }, false, { context: { a: &#039;Hi there&#039; } }, &#039;child &quot;b&quot; fails because [&quot;b&quot; references &quot;a&quot; which is not a number]&#039;]
            ], done);
        });
    });

    describe(&#039;#email&#039;, function () {

        it(&#039;throws when options are not an object&#039;, function (done) {

            expect(function () {

                var emailOptions = true;
                Joi.string().email(emailOptions);
            }).to.throw(&#039;email options must be an object&#039;);
            done();
        });

        it(&#039;throws when checkDNS option is enabled&#039;, function (done) {

            expect(function () {

                var emailOptions = { checkDNS: true };
                Joi.string().email(emailOptions);
            }).to.throw(&#039;checkDNS option is not supported&#039;);
            done();
        });

        it(&#039;throws when tldWhitelist is not an array or object&#039;, function (done) {

            expect(function () {

                var emailOptions = { tldWhitelist: &#039;domain.tld&#039; };
                Joi.string().email(emailOptions);
            }).to.throw(&#039;tldWhitelist must be an array or object&#039;);
            done();
        });

        it(&#039;throws when minDomainAtoms is not a number&#039;, function (done) {

            expect(function () {

                var emailOptions = { minDomainAtoms: &#039;1&#039; };
                Joi.string().email(emailOptions);
            }).to.throw(&#039;minDomainAtoms must be a positive integer&#039;);
            done();
        });

        it(&#039;throws when minDomainAtoms is not an integer&#039;, function (done) {

            expect(function () {

                var emailOptions = { minDomainAtoms: 1.2 };
                Joi.string().email(emailOptions);
            }).to.throw(&#039;minDomainAtoms must be a positive integer&#039;);
            done();
        });

        it(&#039;throws when minDomainAtoms is not positive&#039;, function (done) {

            expect(function () {

                var emailOptions = { minDomainAtoms: 0 };
                Joi.string().email(emailOptions);
            }).to.throw(&#039;minDomainAtoms must be a positive integer&#039;);
            done();
        });

        it(&#039;does not throw when minDomainAtoms is a positive integer&#039;, function (done) {

            expect(function () {

                var emailOptions = { minDomainAtoms: 1 };
                Joi.string().email(emailOptions);
            }).to.not.throw();
            done();
        });

        it(&#039;throws when errorLevel is not an integer or boolean&#039;, function (done) {

            expect(function () {

                var emailOptions = { errorLevel: 1.2 };
                Joi.string().email(emailOptions);
            }).to.throw(&#039;errorLevel must be a non-negative integer or boolean&#039;);
            done();
        });

        it(&#039;throws when errorLevel is negative&#039;, function (done) {

            expect(function () {

                var emailOptions = { errorLevel: -1 };
                Joi.string().email(emailOptions);
            }).to.throw(&#039;errorLevel must be a non-negative integer or boolean&#039;);
            done();
        });

        it(&#039;does not throw when errorLevel is 0&#039;, function (done) {

            expect(function () {

                var emailOptions = { errorLevel: 0 };
                Joi.string().email(emailOptions);
            }).to.not.throw();
            done();
        });
    });

    describe(&#039;#hostname&#039;, function () {

        it(&#039;validates hostnames&#039;, function (done) {

            var schema = Joi.string().hostname();
            Helper.validate(schema, [
                [&#039;www.example.com&#039;, true],
                [&#039;domain.local&#039;, true],
                [&#039;3domain.local&#039;, true],
                [&#039;hostname&#039;, true],
                [&#039;host:name&#039;, false],
                [&#039;-&#039;, false],
                [&#039;2387628&#039;, true],
                [&#039;01234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789&#039;, false],
                [&#039;::1&#039;, true],
                [&#039;0:0:0:0:0:0:0:1&#039;, true],
                [&#039;0:?:0:0:0:0:0:1&#039;, false]
            ], done);
        });
    });

    describe(&#039;#lowercase&#039;, function () {

        it(&#039;only allows strings that are entirely lowercase&#039;, function (done) {

            var schema = Joi.string().lowercase();
            Helper.validateOptions(schema, [
                [&#039;this is all lowercase&#039;, true],
                [&#039;5&#039;, true],
                [&#039;lower\tcase&#039;, true],
                [&#039;Uppercase&#039;, false],
                [&#039;MixEd cAsE&#039;, false],
                [1, false]
            ], { convert: false }, done);
        });

        it(&#039;coerce string to lowercase before validation&#039;, function (done) {

            var schema = Joi.string().lowercase();
            schema.validate(&#039;UPPER TO LOWER&#039;, function (err, value) {

                expect(err).to.not.exist();
                expect(value).to.equal(&#039;upper to lower&#039;);
                done();
            });
        });

        it(&#039;should work in combination with a trim&#039;, function (done) {

            var schema = Joi.string().lowercase().trim();
            Helper.validate(schema, [
                [&#039; abc&#039;, true],
                [&#039; ABC&#039;, true],
                [&#039;ABC&#039;, true],
                [1, false]
            ], done);
        });

        it(&#039;should work in combination with a replacement&#039;, function (done) {

            var schema = Joi.string().lowercase().replace(/\s+/g, &#039; &#039;);
            Helper.validate(schema, [
                [&#039;a\r b\n c&#039;, true, null, &#039;a b c&#039;],
                [&#039;A\t B  C&#039;, true, null, &#039;a b c&#039;],
                [&#039;ABC&#039;, true, null, &#039;abc&#039;],
                [1, false]
            ], done);
        });
    });

    describe(&#039;#uppercase&#039;, function () {

        it(&#039;only allow strings that are entirely uppercase&#039;, function (done) {

            var schema = Joi.string().uppercase();
            Helper.validateOptions(schema, [
                [&#039;THIS IS ALL UPPERCASE&#039;, true],
                [&#039;5&#039;, true],
                [&#039;UPPER\nCASE&#039;, true],
                [&#039;lOWERCASE&#039;, false],
                [&#039;MixEd cAsE&#039;, false],
                [1, false]
            ], { convert: false }, done);
        });

        it(&#039;coerce string to uppercase before validation&#039;, function (done) {

            var schema = Joi.string().uppercase();
            schema.validate(&#039;lower to upper&#039;, function (err, value) {

                expect(err).to.not.exist();
                expect(value).to.equal(&#039;LOWER TO UPPER&#039;);
                done();
            });
        });

        it(&#039;works in combination with a forced trim&#039;, function (done) {

            var schema = Joi.string().uppercase().trim();
            Helper.validate(schema, [
                [&#039; abc&#039;, true],
                [&#039; ABC&#039;, true],
                [&#039;ABC&#039;, true],
                [1, false]
            ], done);
        });

        it(&#039;works in combination with a forced replacement&#039;, function (done) {

            var schema = Joi.string().uppercase().replace(/\s+/g, &#039; &#039;);
            Helper.validate(schema, [
                [&#039;a\r b\n c&#039;, true, null, &#039;A B C&#039;],
                [&#039;A\t B  C&#039;, true, null, &#039;A B C&#039;],
                [&#039;ABC&#039;, true, null, &#039;ABC&#039;],
                [1, false]
            ], done);
        });
    });

    describe(&#039;#trim&#039;, function () {

        it(&#039;only allow strings that have no leading or trailing whitespace&#039;, function (done) {

            var schema = Joi.string().trim();
            Helper.validateOptions(schema, [
                [&#039; something&#039;, false],
                [&#039;something &#039;, false],
                [&#039;something\n&#039;, false],
                [&#039;some thing&#039;, true],
                [&#039;something&#039;, true]
            ], { convert: false }, done);
        });

        it(&#039;removes leading and trailing whitespace before validation&#039;, function (done) {

            var schema = Joi.string().trim();
            schema.validate(&#039; trim this &#039;, function (err, value) {

                expect(err).to.not.exist();
                expect(value).to.equal(&#039;trim this&#039;);
                done();
            });
        });

        it(&#039;removes leading and trailing whitespace before validation&#039;, function (done) {

            var schema = Joi.string().trim().allow(&#039;&#039;);
            schema.validate(&#039;     &#039;, function (err, value) {

                expect(err).to.not.exist();
                expect(value).to.equal(&#039;&#039;);
                done();
            });
        });

        it(&#039;should work in combination with min&#039;, function (done) {

            var schema = Joi.string().min(4).trim();
            Helper.validate(schema, [
                [&#039; a &#039;, false],
                [&#039;abc &#039;, false],
                [&#039;abcd &#039;, true]
            ], done);
        });

        it(&#039;should work in combination with max&#039;, function (done) {

            var schema = Joi.string().max(4).trim();
            Helper.validate(schema, [
                [&#039; abcde &#039;, false],
                [&#039;abc &#039;, true],
                [&#039;abcd &#039;, true]
            ], done);
        });

        it(&#039;should work in combination with length&#039;, function (done) {

            var schema = Joi.string().length(4).trim();
            Helper.validate(schema, [
                [&#039; ab &#039;, false],
                [&#039;abc &#039;, false],
                [&#039;abcd &#039;, true]
            ], done);
        });

        it(&#039;should work in combination with a case change&#039;, function (done) {

            var schema = Joi.string().trim().lowercase();
            Helper.validate(schema, [
                [&#039; abc&#039;, true],
                [&#039; ABC&#039;, true],
                [&#039;ABC&#039;, true]
            ], done);
        });
    });

    describe(&#039;#replace&#039;, function () {

        it(&#039;successfully replaces the first occurrence of the expression&#039;, function (done) {

            var schema = Joi.string().replace(/\s+/, &#039;&#039;); // no &quot;g&quot; flag
            Helper.validateOptions(schema, [
                [&#039;\tsomething&#039;, true, null, &#039;something&#039;],
                [&#039;something\r&#039;, true, null, &#039;something&#039;],
                [&#039;something  &#039;, true, null, &#039;something&#039;],
                [&#039;some  thing&#039;, true, null, &#039;something&#039;],
                [&#039;so me thing&#039;, true, null, &#039;some thing&#039;] // first occurrence!
            ], { convert: true }, done);
        });

        it(&#039;successfully replaces all occurrences of the expression&#039;, function (done) {

            var schema = Joi.string().replace(/\s+/g, &#039;&#039;); // has &quot;g&quot; flag
            Helper.validateOptions(schema, [
                [&#039;\tsomething&#039;, true, null, &#039;something&#039;],
                [&#039;something\r&#039;, true, null, &#039;something&#039;],
                [&#039;something  &#039;, true, null, &#039;something&#039;],
                [&#039;some  thing&#039;, true, null, &#039;something&#039;],
                [&#039;so me thing&#039;, true, null, &#039;something&#039;]
            ], { convert: true }, done);
        });

        it(&#039;successfully replaces all occurrences of a string pattern&#039;, function (done) {

            var schema = Joi.string().replace(&#039;foo&#039;, &#039;X&#039;); // has &quot;g&quot; flag
            Helper.validateOptions(schema, [
                [&#039;foobarfoobazfoo&#039;, true, null, &#039;XbarXbazX&#039;]
            ], { convert: true }, done);
        });

        it(&#039;successfully replaces multiple times&#039;, function (done) {

            var schema = Joi.string().replace(/a/g, &#039;b&#039;).replace(/b/g, &#039;c&#039;);
            schema.validate(&#039;a quick brown fox&#039;, function (err, value) {

                expect(err).to.not.exist();
                expect(value).to.equal(&#039;c quick crown fox&#039;);
                done();
            });
        });

        it(&#039;should work in combination with trim&#039;, function (done) {

            // The string below is the name &quot;Yamada Tarou&quot; separated by a
            // carriage return, a &quot;full width&quot; ideographic space and a newline

            var schema = Joi.string().trim().replace(/\s+/g, &#039; &#039;);
            schema.validate(&#039; \u5C71\u7530\r\u3000\n\u592A\u90CE &#039;, function (err, value) {

                expect(err).to.not.exist();
                expect(value).to.equal(&#039;\u5C71\u7530 \u592A\u90CE&#039;);
                done();
            });
        });

        it(&#039;should work in combination with min&#039;, function (done) {

            var schema = Joi.string().min(4).replace(/\s+/g, &#039; &#039;);
            Helper.validate(schema, [
                [&#039;   a   &#039;, false],
                [&#039;abc    &#039;, true, null, &#039;abc &#039;],
                [&#039;a\t\rbc&#039;, true, null, &#039;a bc&#039;]
            ], done);
        });

        it(&#039;should work in combination with max&#039;, function (done) {

            var schema = Joi.string().max(5).replace(/ CHANGE ME /g, &#039;-b-&#039;);
            Helper.validate(schema, [
                [&#039;a CHANGE ME c&#039;, true, null, &#039;a-b-c&#039;],
                [&#039;a-b-c&#039;, true, null, &#039;a-b-c&#039;] // nothing changes here!
            ], done);
        });

        it(&#039;should work in combination with length&#039;, function (done) {

            var schema = Joi.string().length(5).replace(/\s+/g, &#039; &#039;);
            Helper.validate(schema, [
                [&#039;a    bc&#039;, false],
                [&#039;a\tb\nc&#039;, true, null, &#039;a b c&#039;]
            ], done);
        });

    });

    describe(&#039;#regex&#039;, function () {

        it(&#039;should not include a pattern name by default&#039;, function (done) {

            var schema = Joi.string().regex(/[a-z]+/).regex(/[0-9]+/);
            schema.validate(&#039;abcd&#039;, function (err, value) {

                expect(err.message).to.contain(&#039;required pattern&#039;);
                done();
            });
        });

        it(&#039;should include a pattern name if specified&#039;, function (done) {

            var schema = Joi.string().regex(/[a-z]+/, &#039;letters&#039;).regex(/[0-9]+/, &#039;numbers&#039;);
            schema.validate(&#039;abcd&#039;, function (err, value) {

                expect(err.message).to.contain(&#039;numbers pattern&#039;);
                done();
            });
        });
    });

    describe(&#039;#ip&#039;, function () {

        var invalidIPs = [
                [&#039;ASDF&#039;, false],
                [&#039;192.0.2.16:80/30&#039;, false],
                [&#039;192.0.2.16a&#039;, false],
                [&#039;qwerty&#039;, false],
                [&#039;127.0.0.1:8000&#039;, false],
                [&#039;ftp://www.example.com&#039;, false],
                [&#039;Bananas in pajamas are coming down the stairs&#039;, false]
            ],
            invalidIPv4s = [
                [&#039;0.0.0.0/33&#039;, false],
                [&#039;256.0.0.0/0&#039;, false],
                [&#039;255.255.255.256/32&#039;, false],
                [&#039;256.0.0.0&#039;, false],
                [&#039;255.255.255.256&#039;, false]
            ],
            invalidIPv6s = [
                [&#039;2001:db8::7/33&#039;, false],
                [&#039;1080:0:0:0:8:800:200C:417G&#039;, false]
            ],
            invalidIPvFutures = [
                [&#039;v1.09azAZ-._~!$&amp;\&#039;()*+,;=:/33&#039;, false],
                [&#039;v1.09#&#039;, false]
            ],
            validIPv4sWithCidr = function (success) {

                return [
                    [&#039;0.0.0.0/32&#039;, success],
                    [&#039;255.255.255.255/0&#039;, success],
                    [&#039;127.0.0.1/0&#039;, success],
                    [&#039;192.168.2.1/0&#039;, success],
                    [&#039;0.0.0.3/2&#039;, success],
                    [&#039;0.0.0.7/3&#039;, success],
                    [&#039;0.0.0.15/4&#039;, success],
                    [&#039;0.0.0.31/5&#039;, success],
                    [&#039;0.0.0.63/6&#039;, success],
                    [&#039;0.0.0.127/7&#039;, success],
                    [&#039;01.020.030.100/7&#039;, success],
                    [&#039;0.0.0.0/0&#039;, success],
                    [&#039;00.00.00.00/0&#039;, success],
                    [&#039;000.000.000.000/32&#039;, success]
                ];
            },
            validIPv4sWithoutCidr = function (success) {

                return [
                    [&#039;0.0.0.0&#039;, success],
                    [&#039;255.255.255.255&#039;, success],
                    [&#039;127.0.0.1&#039;, success],
                    [&#039;192.168.2.1&#039;, success],
                    [&#039;0.0.0.3&#039;, success],
                    [&#039;0.0.0.7&#039;, success],
                    [&#039;0.0.0.15&#039;, success],
                    [&#039;0.0.0.31&#039;, success],
                    [&#039;0.0.0.63&#039;, success],
                    [&#039;0.0.0.127&#039;, success],
                    [&#039;01.020.030.100&#039;, success],
                    [&#039;0.0.0.0&#039;, success],
                    [&#039;00.00.00.00&#039;, success],
                    [&#039;000.000.000.000&#039;, success]
                ];
            },
            validIPv6sWithCidr = function (success) {

                return [
                    [&#039;2001:db8::7/32&#039;, success],
                    [&#039;a:b:c:d:e::1.2.3.4/13&#039;, success],
                    [&#039;FEDC:BA98:7654:3210:FEDC:BA98:7654:3210/0&#039;, success],
                    [&#039;FEDC:BA98:7654:3210:FEDC:BA98:7654:3210/32&#039;, success],
                    [&#039;1080:0:0:0:8:800:200C:417A/27&#039;, success]
                ];
            },
            validIPv6sWithoutCidr = function (success) {

                return [
                    [&#039;2001:db8::7&#039;, success],
                    [&#039;a:b:c:d:e::1.2.3.4&#039;, success],
                    [&#039;FEDC:BA98:7654:3210:FEDC:BA98:7654:3210&#039;, success],
                    [&#039;FEDC:BA98:7654:3210:FEDC:BA98:7654:3210&#039;, success],
                    [&#039;1080:0:0:0:8:800:200C:417A&#039;, success]
                ];
            },
            validIPvFuturesWithCidr = function (success) {

                return [
                    [&#039;v1.09azAZ-._~!$&amp;\&#039;()*+,;=:/32&#039;, success]
                ];
            },
            validIPvFuturesWithoutCidr = function (success) {

                return [
                    [&#039;v1.09azAZ-._~!$&amp;\&#039;()*+,;=:&#039;, success]
                ];
            };

        it(&#039;should validate all ip addresses with optional CIDR by default&#039;, function (done) {

            var schema = Joi.string().ip();
            Helper.validate(schema, []
                .concat(validIPv4sWithCidr(true))
                .concat(validIPv4sWithoutCidr(true))
                .concat(validIPv6sWithCidr(true))
                .concat(validIPv6sWithoutCidr(true))
                .concat(validIPvFuturesWithCidr(true))
                .concat(validIPvFuturesWithoutCidr(true))
                .concat(invalidIPs)
                .concat(invalidIPv4s)
                .concat(invalidIPv6s)
                .concat(invalidIPvFutures), done);
        });

        it(&#039;should validate all ip addresses with an optional CIDR&#039;, function (done) {

            var schema = Joi.string().ip({ cidr: &#039;optional&#039; });
            Helper.validate(schema, []
                .concat(validIPv4sWithCidr(true))
                .concat(validIPv4sWithoutCidr(true))
                .concat(validIPv6sWithCidr(true))
                .concat(validIPv6sWithoutCidr(true))
                .concat(validIPvFuturesWithCidr(true))
                .concat(validIPvFuturesWithoutCidr(true))
                .concat(invalidIPs)
                .concat(invalidIPv4s)
                .concat(invalidIPv6s)
                .concat(invalidIPvFutures), done);
        });

        it(&#039;should validate all ip addresses with a required CIDR&#039;, function (done) {

            var schema = Joi.string().ip({ cidr: &#039;required&#039; });
            Helper.validate(schema, []
                .concat(validIPv4sWithCidr(true))
                .concat(validIPv4sWithoutCidr(false))
                .concat(validIPv6sWithCidr(true))
                .concat(validIPv6sWithoutCidr(false))
                .concat(validIPvFuturesWithCidr(true))
                .concat(validIPvFuturesWithoutCidr(false))
                .concat(invalidIPs)
                .concat(invalidIPv4s)
                .concat(invalidIPv6s)
                .concat(invalidIPvFutures), done);
        });

        it(&#039;should validate all ip addresses with a forbidden CIDR&#039;, function (done) {

            var schema = Joi.string().ip({ cidr: &#039;forbidden&#039; });
            Helper.validate(schema, []
                .concat(validIPv4sWithCidr(false))
                .concat(validIPv4sWithoutCidr(true))
                .concat(validIPv6sWithCidr(false))
                .concat(validIPv6sWithoutCidr(true))
                .concat(validIPvFuturesWithCidr(false))
                .concat(validIPvFuturesWithoutCidr(true))
                .concat(invalidIPs)
                .concat(invalidIPv4s)
                .concat(invalidIPv6s)
                .concat(invalidIPvFutures), done);
        });

        it(&#039;throws when options is not an object&#039;, function (done) {

            expect(function () {

                Joi.string().ip(42);
            }).to.throw(&#039;options must be an object&#039;);
            done();
        });

        it(&#039;throws when options.cidr is not a string&#039;, function (done) {

            expect(function () {

                Joi.string().ip({ cidr: 42 });
            }).to.throw(&#039;cidr must be a string&#039;);
            done();
        });

        it(&#039;throws when options.cidr is not a valid value&#039;, function (done) {

            expect(function () {

                Joi.string().ip({ cidr: &#039;42&#039; });
            }).to.throw(&#039;cidr must be one of required, optional, forbidden&#039;);
            done();
        });

        it(&#039;throws when options.version is an empty array&#039;, function (done) {

            expect(function () {

                Joi.string().ip({ version: [] });
            }).to.throw(&#039;version must have at least 1 version specified&#039;);
            done();
        });

        it(&#039;throws when options.version is not a string&#039;, function (done) {

            expect(function () {

                Joi.string().ip({ version: 42 });
            }).to.throw(&#039;version at position 0 must be a string&#039;);
            done();
        });

        it(&#039;throws when options.version is not a valid value&#039;, function (done) {

            expect(function () {

                Joi.string().ip({ version: &#039;42&#039; });
            }).to.throw(&#039;version at position 0 must be one of ipv4, ipv6, ipvfuture&#039;);
            done();
        });

        it(&#039;validates ip with a friendly error message&#039;, function (done) {

            var schema = { item: Joi.string().ip() };
            Joi.compile(schema).validate({ item: &#039;something&#039; }, function (err, value) {

                expect(err.message).to.contain(&#039;must be a valid ip address&#039;);
                done();
            });
        });

        it(&#039;validates ip and cidr presence with a friendly error message&#039;, function (done) {

            var schema = { item: Joi.string().ip({ cidr: &#039;required&#039; }) };
            Joi.compile(schema).validate({ item: &#039;something&#039; }, function (err, value) {

                expect(err.message).to.contain(&#039;must be a valid ip address with a required CIDR&#039;);
                done();
            });
        });

        it(&#039;validates custom ip version and cidr presence with a friendly error message&#039;, function (done) {

            var schema = { item: Joi.string().ip({ version: &#039;ipv4&#039;, cidr: &#039;required&#039; }) };
            Joi.compile(schema).validate({ item: &#039;something&#039; }, function (err, value) {

                expect(err.message).to.contain(&#039;child &quot;item&quot; fails because [&quot;item&quot; must be a valid ip address of one of the following versions [ipv4] with a required CIDR]&#039;);
                done();
            });
        });

        describe(&#039;#ip({ version: &quot;ipv4&quot; })&#039;, function () {

            it(&#039;should validate all ipv4 addresses with a default CIDR strategy&#039;, function (done) {

                var schema = Joi.string().ip({ version: &#039;ipv4&#039; });
                Helper.validate(schema, []
                    .concat(validIPv4sWithCidr(true))
                    .concat(validIPv4sWithoutCidr(true))
                    .concat(validIPv6sWithCidr(false))
                    .concat(validIPv6sWithoutCidr(false))
                    .concat(validIPvFuturesWithCidr(false))
                    .concat(validIPvFuturesWithoutCidr(false))
                    .concat(invalidIPs)
                    .concat(invalidIPv4s)
                    .concat(invalidIPv6s)
                    .concat(invalidIPvFutures), done);
            });

            it(&#039;should validate all ipv4 addresses with an optional CIDR&#039;, function (done) {

                var schema = Joi.string().ip({ version: &#039;ipv4&#039;, cidr: &#039;optional&#039; });
                Helper.validate(schema, []
                    .concat(validIPv4sWithCidr(true))
                    .concat(validIPv4sWithoutCidr(true))
                    .concat(validIPv6sWithCidr(false))
                    .concat(validIPv6sWithoutCidr(false))
                    .concat(validIPvFuturesWithCidr(false))
                    .concat(validIPvFuturesWithoutCidr(false))
                    .concat(invalidIPs)
                    .concat(invalidIPv4s)
                    .concat(invalidIPv6s)
                    .concat(invalidIPvFutures), done);
            });

            it(&#039;should validate all ipv4 addresses with a required CIDR&#039;, function (done) {

                var schema = Joi.string().ip({ version: &#039;ipv4&#039;, cidr: &#039;required&#039; });
                Helper.validate(schema, []
                    .concat(validIPv4sWithCidr(true))
                    .concat(validIPv4sWithoutCidr(false))
                    .concat(validIPv6sWithCidr(false))
                    .concat(validIPv6sWithoutCidr(false))
                    .concat(validIPvFuturesWithCidr(false))
                    .concat(validIPvFuturesWithoutCidr(false))
                    .concat(invalidIPs)
                    .concat(invalidIPv4s)
                    .concat(invalidIPv6s)
                    .concat(invalidIPvFutures), done);
            });

            it(&#039;should validate all ipv4 addresses with a forbidden CIDR&#039;, function (done) {

                var schema = Joi.string().ip({ version: &#039;ipv4&#039;, cidr: &#039;forbidden&#039; });
                Helper.validate(schema, []
                    .concat(validIPv4sWithCidr(false))
                    .concat(validIPv4sWithoutCidr(true))
                    .concat(validIPv6sWithCidr(false))
                    .concat(validIPv6sWithoutCidr(false))
                    .concat(validIPvFuturesWithCidr(false))
                    .concat(validIPvFuturesWithoutCidr(false))
                    .concat(invalidIPs)
                    .concat(invalidIPv4s)
                    .concat(invalidIPv6s)
                    .concat(invalidIPvFutures), done);
            });
        });

        describe(&#039;#ip({ version: &quot;ipv6&quot; })&#039;, function () {

            it(&#039;should validate all ipv6 addresses with a default CIDR strategy&#039;, function (done) {

                var schema = Joi.string().ip({ version: &#039;ipv6&#039; });
                Helper.validate(schema, []
                    .concat(validIPv4sWithCidr(false))
                    .concat(validIPv4sWithoutCidr(false))
                    .concat(validIPv6sWithCidr(true))
                    .concat(validIPv6sWithoutCidr(true))
                    .concat(validIPvFuturesWithCidr(false))
                    .concat(validIPvFuturesWithoutCidr(false))
                    .concat(invalidIPs)
                    .concat(invalidIPv4s)
                    .concat(invalidIPv6s)
                    .concat(invalidIPvFutures), done);
            });

            it(&#039;should validate all ipv6 addresses with an optional CIDR&#039;, function (done) {

                var schema = Joi.string().ip({ version: &#039;ipv6&#039;, cidr: &#039;optional&#039; });
                Helper.validate(schema, []
                    .concat(validIPv4sWithCidr(false))
                    .concat(validIPv4sWithoutCidr(false))
                    .concat(validIPv6sWithCidr(true))
                    .concat(validIPv6sWithoutCidr(true))
                    .concat(validIPvFuturesWithCidr(false))
                    .concat(validIPvFuturesWithoutCidr(false))
                    .concat(invalidIPs)
                    .concat(invalidIPv4s)
                    .concat(invalidIPv6s)
                    .concat(invalidIPvFutures), done);
            });

            it(&#039;should validate all ipv6 addresses with a required CIDR&#039;, function (done) {

                var schema = Joi.string().ip({ version: &#039;ipv6&#039;, cidr: &#039;required&#039; });
                Helper.validate(schema, []
                    .concat(validIPv4sWithCidr(false))
                    .concat(validIPv4sWithoutCidr(false))
                    .concat(validIPv6sWithCidr(true))
                    .concat(validIPv6sWithoutCidr(false))
                    .concat(validIPvFuturesWithCidr(false))
                    .concat(validIPvFuturesWithoutCidr(false))
                    .concat(invalidIPs)
                    .concat(invalidIPv4s)
                    .concat(invalidIPv6s)
                    .concat(invalidIPvFutures), done);
            });

            it(&#039;should validate all ipv6 addresses with a forbidden CIDR&#039;, function (done) {

                var schema = Joi.string().ip({ version: &#039;ipv6&#039;, cidr: &#039;forbidden&#039; });
                Helper.validate(schema, []
                    .concat(validIPv4sWithCidr(false))
                    .concat(validIPv4sWithoutCidr(false))
                    .concat(validIPv6sWithCidr(false))
                    .concat(validIPv6sWithoutCidr(true))
                    .concat(validIPvFuturesWithCidr(false))
                    .concat(validIPvFuturesWithoutCidr(false))
                    .concat(invalidIPs)
                    .concat(invalidIPv4s)
                    .concat(invalidIPv6s)
                    .concat(invalidIPvFutures), done);
            });
        });

        describe(&#039;#ip({ version: &quot;ipvfuture&quot; })&#039;, function () {

            it(&#039;should validate all ipvfuture addresses with a default CIDR strategy&#039;, function (done) {

                var schema = Joi.string().ip({ version: &#039;ipvfuture&#039; });
                Helper.validate(schema, []
                    .concat(validIPv4sWithCidr(false))
                    .concat(validIPv4sWithoutCidr(false))
                    .concat(validIPv6sWithCidr(false))
                    .concat(validIPv6sWithoutCidr(false))
                    .concat(validIPvFuturesWithCidr(true))
                    .concat(validIPvFuturesWithoutCidr(true))
                    .concat(invalidIPs)
                    .concat(invalidIPv4s)
                    .concat(invalidIPv6s)
                    .concat(invalidIPvFutures), done);
            });

            it(&#039;should validate all ipvfuture addresses with an optional CIDR&#039;, function (done) {

                var schema = Joi.string().ip({ version: &#039;ipvfuture&#039;, cidr: &#039;optional&#039; });
                Helper.validate(schema, []
                    .concat(validIPv4sWithCidr(false))
                    .concat(validIPv4sWithoutCidr(false))
                    .concat(validIPv6sWithCidr(false))
                    .concat(validIPv6sWithoutCidr(false))
                    .concat(validIPvFuturesWithCidr(true))
                    .concat(validIPvFuturesWithoutCidr(true))
                    .concat(invalidIPs)
                    .concat(invalidIPv4s)
                    .concat(invalidIPv6s)
                    .concat(invalidIPvFutures), done);
            });

            it(&#039;should validate all ipvfuture addresses with a required CIDR&#039;, function (done) {

                var schema = Joi.string().ip({ version: &#039;ipvfuture&#039;, cidr: &#039;required&#039; });
                Helper.validate(schema, []
                    .concat(validIPv4sWithCidr(false))
                    .concat(validIPv4sWithoutCidr(false))
                    .concat(validIPv6sWithCidr(false))
                    .concat(validIPv6sWithoutCidr(false))
                    .concat(validIPvFuturesWithCidr(true))
                    .concat(validIPvFuturesWithoutCidr(false))
                    .concat(invalidIPs)
                    .concat(invalidIPv4s)
                    .concat(invalidIPv6s)
                    .concat(invalidIPvFutures), done);
            });

            it(&#039;should validate all ipvfuture addresses with a forbidden CIDR&#039;, function (done) {

                var schema = Joi.string().ip({ version: &#039;ipvfuture&#039;, cidr: &#039;forbidden&#039; });
                Helper.validate(schema, []
                    .concat(validIPv4sWithCidr(false))
                    .concat(validIPv4sWithoutCidr(false))
                    .concat(validIPv6sWithCidr(false))
                    .concat(validIPv6sWithoutCidr(false))
                    .concat(validIPvFuturesWithCidr(false))
                    .concat(validIPvFuturesWithoutCidr(true))
                    .concat(invalidIPs)
                    .concat(invalidIPv4s)
                    .concat(invalidIPv6s)
                    .concat(invalidIPvFutures), done);
            });
        });

        describe(&#039;#ip({ version: [ &quot;ipv4&quot;, &quot;ipv6&quot; ] })&#039;, function () {

            it(&#039;should validate all ipv4 and ipv6 addresses with a default CIDR strategy&#039;, function (done) {

                var schema = Joi.string().ip({ version: [&#039;ipv4&#039;, &#039;ipv6&#039;] });
                Helper.validate(schema, []
                    .concat(validIPv4sWithCidr(true))
                    .concat(validIPv4sWithoutCidr(true))
                    .concat(validIPv6sWithCidr(true))
                    .concat(validIPv6sWithoutCidr(true))
                    .concat(validIPvFuturesWithCidr(false))
                    .concat(validIPvFuturesWithoutCidr(false))
                    .concat(invalidIPs)
                    .concat(invalidIPv4s)
                    .concat(invalidIPv6s)
                    .concat(invalidIPvFutures), done);
            });

            it(&#039;should validate all ipv4 and ipv6 addresses with an optional CIDR&#039;, function (done) {

                var schema = Joi.string().ip({ version: [&#039;ipv4&#039;, &#039;ipv6&#039;], cidr: &#039;optional&#039; });
                Helper.validate(schema, []
                    .concat(validIPv4sWithCidr(true))
                    .concat(validIPv4sWithoutCidr(true))
                    .concat(validIPv6sWithCidr(true))
                    .concat(validIPv6sWithoutCidr(true))
                    .concat(validIPvFuturesWithCidr(false))
                    .concat(validIPvFuturesWithoutCidr(false))
                    .concat(invalidIPs)
                    .concat(invalidIPv4s)
                    .concat(invalidIPv6s)
                    .concat(invalidIPvFutures), done);
            });

            it(&#039;should validate all ipv4 and ipv6 addresses with a required CIDR&#039;, function (done) {

                var schema = Joi.string().ip({ version: [&#039;ipv4&#039;, &#039;ipv6&#039;], cidr: &#039;required&#039; });
                Helper.validate(schema, []
                    .concat(validIPv4sWithCidr(true))
                    .concat(validIPv4sWithoutCidr(false))
                    .concat(validIPv6sWithCidr(true))
                    .concat(validIPv6sWithoutCidr(false))
                    .concat(validIPvFuturesWithCidr(false))
                    .concat(validIPvFuturesWithoutCidr(false))
                    .concat(invalidIPs)
                    .concat(invalidIPv4s)
                    .concat(invalidIPv6s)
                    .concat(invalidIPvFutures), done);
            });

            it(&#039;should validate all ipv4 and ipv6 addresses with a forbidden CIDR&#039;, function (done) {

                var schema = Joi.string().ip({ version: [&#039;ipv4&#039;, &#039;ipv6&#039;], cidr: &#039;forbidden&#039; });
                Helper.validate(schema, []
                    .concat(validIPv4sWithCidr(false))
                    .concat(validIPv4sWithoutCidr(true))
                    .concat(validIPv6sWithCidr(false))
                    .concat(validIPv6sWithoutCidr(true))
                    .concat(validIPvFuturesWithCidr(false))
                    .concat(validIPvFuturesWithoutCidr(false))
                    .concat(invalidIPs)
                    .concat(invalidIPv4s)
                    .concat(invalidIPv6s)
                    .concat(invalidIPvFutures), done);
            });
        });
    });

    describe(&#039;#validate&#039;, function () {

        it(&#039;should, by default, allow undefined, deny empty string&#039;, function (done) {

            Helper.validate(Joi.string(), [
                [undefined, true],
                [&#039;&#039;, false]
            ], done);
        });

        it(&#039;should, when .required(), deny undefined, deny empty string&#039;, function (done) {

            Helper.validate(Joi.string().required(), [
                [undefined, false],
                [&#039;&#039;, false]
            ], done);
        });

        it(&#039;should, when .required(), print a friend error message for an empty string&#039;, function (done) {

            var schema = Joi.string().required();
            Joi.compile(schema).validate(&#039;&#039;, function (err, value) {

                expect(err.message).to.contain(&#039;be empty&#039;);
                done();
            });
        });

        it(&#039;should, when .required(), validate non-empty strings&#039;, function (done) {

            var schema = Joi.string().required();
            Helper.validate(schema, [
                [&#039;test&#039;, true],
                [&#039;0&#039;, true],
                [null, false]
            ], done);
        });

        it(&#039;validates invalid values&#039;, function (done) {

            var schema = Joi.string().invalid(&#039;a&#039;, &#039;b&#039;, &#039;c&#039;);
            Helper.validate(schema, [
                [&#039;x&#039;, true],
                [&#039;a&#039;, false],
                [&#039;c&#039;, false]
            ], done);
        });

        it(&#039;should invalidate invalid values&#039;, function (done) {

            var schema = Joi.string().valid(&#039;a&#039;, &#039;b&#039;, &#039;c&#039;);
            Helper.validate(schema, [
                [&#039;x&#039;, false],
                [&#039;a&#039;, true],
                [&#039;c&#039;, true]
            ], done);
        });

        it(&#039;validates array arguments correctly&#039;, function (done) {

            var schema = Joi.string().valid([&#039;a&#039;, &#039;b&#039;, &#039;c&#039;]);
            Helper.validate(schema, [
                [&#039;x&#039;, false],
                [&#039;a&#039;, true],
                [&#039;c&#039;, true]
            ], done);
        });

        it(&#039;validates minimum length when min is used&#039;, function (done) {

            var schema = Joi.string().min(3);
            Helper.validate(schema, [
                [&#039;test&#039;, true],
                [&#039;0&#039;, false],
                [null, false]
            ], done);
        });

        it(&#039;validates minimum length when min is 0&#039;, function (done) {

            var schema = Joi.string().min(0).required();
            Helper.validate(schema, [
                [&#039;0&#039;, true],
                [null, false],
                [undefined, false]
            ], done);
        });

        it(&#039;should return false with minimum length and a null value passed in&#039;, function (done) {

            var schema = Joi.string().min(3);
            Helper.validate(schema, [
                [null, false]
            ], done);
        });

        it(&#039;null allowed overrides min length requirement&#039;, function (done) {

            var schema = Joi.string().min(3).allow(null);
            Helper.validate(schema, [
                [null, true]
            ], done);
        });

        it(&#039;validates maximum length when max is used&#039;, function (done) {

            var schema = Joi.string().max(3);
            Helper.validate(schema, [
                [&#039;test&#039;, false],
                [&#039;0&#039;, true],
                [null, false]
            ], done);
        });

        it(&#039;should return true with max and not required when value is undefined&#039;, function (done) {

            var schema = Joi.string().max(3);
            Helper.validate(schema, [
                [undefined, true]
            ], done);
        });

        it(&#039;validates length requirements&#039;, function (done) {

            var schema = Joi.string().length(3);
            Helper.validate(schema, [
                [&#039;test&#039;, false],
                [&#039;0&#039;, false],
                [null, false],
                [&#039;abc&#039;, true]
            ], done);
        });

        it(&#039;validates regex&#039;, function (done) {

            var schema = Joi.string().regex(/^[0-9][-][a-z]+$/);
            Helper.validate(schema, [
                [&#039;van&#039;, false],
                [&#039;0-www&#039;, true]
            ], done);
        });

        it(&#039;validates regex (ignoring global flag)&#039;, function (done) {

            var schema = Joi.string().regex(/a/g);
            Helper.validate(schema, [
                [&#039;ab&#039;, true],
                [&#039;ac&#039;, true]
            ], done);
        });

        it(&#039;validates token&#039;, function (done) {

            var schema = Joi.string().token();
            Helper.validate(schema, [
                [&#039;w0rld_of_w4lm4rtl4bs&#039;, true],
                [&#039;w0rld of_w4lm4rtl4bs&#039;, false],
                [&#039;abcd#f?h1j orly?&#039;, false]
            ], done);
        });

        it(&#039;validates alphanum&#039;, function (done) {

            var schema = Joi.string().alphanum();
            Helper.validate(schema, [
                [&#039;w0rld of w4lm4rtl4bs&#039;, false],
                [&#039;w0rldofw4lm4rtl4bs&#039;, true],
                [&#039;abcd#f?h1j orly?&#039;, false]
            ], done);
        });

        it(&#039;validates email&#039;, function (done) {

            var schema = Joi.string().email();
            Helper.validate(schema, [
                [&#039;joe@example.com&#039;, true],
                [&#039;&quot;joe&quot;@example.com&#039;, true],
                [&#039;@iaminvalid.com&#039;, false],
                [&#039;joe@[IPv6:2a00:1450:4001:c02::1b]&#039;, true],
                [&#039;12345678901234567890123456789012345678901234567890123456789012345@walmartlabs.com&#039;, false],
                [&#039;123456789012345678901234567890123456789012345678901234567890@12345678901234567890123456789012345678901234567890123456789.12345678901234567890123456789012345678901234567890123456789.12345678901234567890123456789012345678901234567890123456789.12345.toolong.com&#039;, false]
            ], done);
        });

        it(&#039;validates email with tldWhitelist as array&#039;, function (done) {

            var schema = Joi.string().email({ tldWhitelist: [&#039;com&#039;, &#039;org&#039;] });
            Helper.validate(schema, [
                [&#039;joe@example.com&#039;, true],
                [&#039;joe@example.org&#039;, true],
                [&#039;joe@example.edu&#039;, false]
            ], done);
        });

        it(&#039;validates email with tldWhitelist as object&#039;, function (done) {

            var schema = Joi.string().email({ tldWhitelist: { com: true, org: true } });
            Helper.validate(schema, [
                [&#039;joe@example.com&#039;, true],
                [&#039;joe@example.org&#039;, true],
                [&#039;joe@example.edu&#039;, false]
            ], done);
        });

        it(&#039;validates email with minDomainAtoms&#039;, function (done) {

            var schema = Joi.string().email({ minDomainAtoms: 4 });
            Helper.validate(schema, [
                [&#039;joe@example.com&#039;, false],
                [&#039;joe@www.example.com&#039;, false],
                [&#039;joe@sub.www.example.com&#039;, true]
            ], done);
        });

        it(&#039;validates email with errorLevel as boolean&#039;, function (done) {

            var schema = Joi.string().email({ errorLevel: false });
            Helper.validate(schema, [
                [&#039;joe@example.com&#039;, true],
                [&#039;joe@www.example.com&#039;, true],
                [&#039;joe@localhost&#039;, true],
                [&#039;joe&#039;, false]
            ]);

            schema = Joi.string().email({ errorLevel: true });
            Helper.validate(schema, [
                [&#039;joe@example.com&#039;, true],
                [&#039;joe@www.example.com&#039;, true],
                [&#039;joe@localhost&#039;, false],
                [&#039;joe&#039;, false]
            ], done);
        });

        it(&#039;validates email with errorLevel as integer&#039;, function (done) {

            var schema = Joi.string().email({ errorLevel: 10 });
            Helper.validate(schema, [
                [&#039;joe@example.com&#039;, true],
                [&#039;joe@www.example.com&#039;, true],
                [&#039;joe@localhost&#039;, true],
                [&#039;joe&#039;, false]
            ], done);
        });

        it(&#039;validates email with a friendly error message&#039;, function (done) {

            var schema = { item: Joi.string().email() };
            Joi.compile(schema).validate({ item: &#039;something&#039; }, function (err, value) {

                expect(err.message).to.contain(&#039;must be a valid email&#039;);
                done();
            });
        });

        it(&#039;should return false for denied value&#039;, function (done) {

            var text = Joi.string().invalid(&#039;joi&#039;);
            text.validate(&#039;joi&#039;, function (err, value) {

                expect(err).to.exist();
                done();
            });
        });

        it(&#039;should return true for allowed value&#039;, function (done) {

            var text = Joi.string().allow(&#039;hapi&#039;);
            text.validate(&#039;result&#039;, function (err, value) {

                expect(err).to.not.exist();
                done();
            });
        });

        it(&#039;validates with one validator (min)&#039;, function (done) {

            var text = Joi.string().min(3);
            text.validate(&#039;joi&#039;, function (err, value) {

                expect(err).to.not.exist();
                done();
            });
        });

        it(&#039;validates with two validators (min, required)&#039;, function (done) {

            var text = Joi.string().min(3).required();
            text.validate(&#039;joi&#039;, function (err, value) {

                expect(err).to.not.exist();

                text.validate(&#039;&#039;, function (err2, value2) {

                    expect(err2).to.exist();
                    done();
                });
            });
        });

        it(&#039;validates null with allow(null)&#039;, function (done) {

            Helper.validate(Joi.string().allow(null), [
                [null, true]
            ], done);
        });

        it(&#039;validates &quot;&quot; (empty string) with allow(\&#039;\&#039;)&#039;, function (done) {

            Helper.validate(Joi.string().allow(&#039;&#039;), [
                [&#039;&#039;, true],
                [&#039;&#039;, true]
            ], done);
        });

        it(&#039;validates combination of required and min&#039;, function (done) {

            var rule = Joi.string().required().min(3);
            Helper.validate(rule, [
                [&#039;x&#039;, false],
                [&#039;123&#039;, true],
                [&#039;&#039;, false],
                [null, false]
            ], done);
        });

        it(&#039;validates combination of required and max&#039;, function (done) {

            var rule = Joi.string().required().max(3);
            Helper.validate(rule, [
                [&#039;x&#039;, true],
                [&#039;123&#039;, true],
                [&#039;1234&#039;, false],
                [&#039;&#039;, false],
                [null, false]
            ], done);
        });

        it(&#039;validates combination of allow(\&#039;\&#039;) and min&#039;, function (done) {

            var rule = Joi.string().allow(&#039;&#039;).min(3);
            Helper.validate(rule, [
                [&#039;x&#039;, false],
                [&#039;123&#039;, true],
                [&#039;1234&#039;, true],
                [&#039;&#039;, true],
                [null, false]
            ], done);
        });

        it(&#039;validates combination of allow(\&#039;\&#039;) and max&#039;, function (done) {

            var rule = Joi.string().allow(&#039;&#039;).max(3);
            Helper.validate(rule, [
                [&#039;x&#039;, true],
                [&#039;123&#039;, true],
                [&#039;1234&#039;, false],
                [&#039;&#039;, true],
                [null, false]
            ], done);
        });

        it(&#039;validates combination of null allowed and max&#039;, function (done) {

            var rule = Joi.string().allow(null).max(3);
            Helper.validate(rule, [
                [&#039;x&#039;, true],
                [&#039;123&#039;, true],
                [&#039;1234&#039;, false],
                [&#039;&#039;, false],
                [null, true]
            ], done);
        });

        it(&#039;validates combination of min and max&#039;, function (done) {

            var rule = Joi.string().min(2).max(3);
            Helper.validate(rule, [
                [&#039;x&#039;, false],
                [&#039;123&#039;, true],
                [&#039;1234&#039;, false],
                [&#039;12&#039;, true],
                [&#039;&#039;, false],
                [null, false]
            ], done);
        });

        it(&#039;validates combination of min, max, and allow(\&#039;\&#039;)&#039;, function (done) {

            var rule = Joi.string().min(2).max(3).allow(&#039;&#039;);
            Helper.validate(rule, [
                [&#039;x&#039;, false],
                [&#039;123&#039;, true],
                [&#039;1234&#039;, false],
                [&#039;12&#039;, true],
                [&#039;&#039;, true],
                [null, false]
            ], done);
        });

        it(&#039;validates combination of min, max, and required&#039;, function (done) {

            var rule = Joi.string().min(2).max(3).required();
            Helper.validate(rule, [
                [&#039;x&#039;, false],
                [&#039;123&#039;, true],
                [&#039;1234&#039;, false],
                [&#039;12&#039;, true],
                [&#039;&#039;, false],
                [null, false]
            ], done);
        });

        it(&#039;validates combination of min, max, and regex&#039;, function (done) {

            var rule = Joi.string().min(2).max(3).regex(/^a/);
            Helper.validate(rule, [
                [&#039;x&#039;, false],
                [&#039;123&#039;, false],
                [&#039;1234&#039;, false],
                [&#039;12&#039;, false],
                [&#039;ab&#039;, true],
                [&#039;abc&#039;, true],
                [&#039;abcd&#039;, false],
                [&#039;&#039;, false],
                [null, false]
            ], done);
        });

        it(&#039;validates combination of min, max, regex, and allow(\&#039;\&#039;)&#039;, function (done) {

            var rule = Joi.string().min(2).max(3).regex(/^a/).allow(&#039;&#039;);
            Helper.validate(rule, [
                [&#039;x&#039;, false],
                [&#039;123&#039;, false],
                [&#039;1234&#039;, false],
                [&#039;12&#039;, false],
                [&#039;ab&#039;, true],
                [&#039;abc&#039;, true],
                [&#039;abcd&#039;, false],
                [&#039;&#039;, true],
                [null, false]
            ], done);
        });

        it(&#039;validates combination of min, max, regex, and required&#039;, function (done) {

            var rule = Joi.string().min(2).max(3).regex(/^a/).required();
            Helper.validate(rule, [
                [&#039;x&#039;, false],
                [&#039;123&#039;, false],
                [&#039;1234&#039;, false],
                [&#039;12&#039;, false],
                [&#039;ab&#039;, true],
                [&#039;abc&#039;, true],
                [&#039;abcd&#039;, false],
                [&#039;&#039;, false],
                [null, false]
            ], done);
        });

        it(&#039;validates combination of min, max, and alphanum&#039;, function (done) {

            var rule = Joi.string().min(2).max(3).alphanum();
            Helper.validate(rule, [
                [&#039;x&#039;, false],
                [&#039;123&#039;, true],
                [&#039;1234&#039;, false],
                [&#039;12&#039;, true],
                [&#039;ab&#039;, true],
                [&#039;abc&#039;, true],
                [&#039;abcd&#039;, false],
                [&#039;*ab&#039;, false],
                [&#039;&#039;, false],
                [null, false]
            ], done);
        });

        it(&#039;validates combination of min, max, alphanum, and allow(\&#039;\&#039;)&#039;, function (done) {

            var rule = Joi.string().min(2).max(3).alphanum().allow(&#039;&#039;);
            Helper.validate(rule, [
                [&#039;x&#039;, false],
                [&#039;123&#039;, true],
                [&#039;1234&#039;, false],
                [&#039;12&#039;, true],
                [&#039;ab&#039;, true],
                [&#039;abc&#039;, true],
                [&#039;abcd&#039;, false],
                [&#039;*ab&#039;, false],
                [&#039;&#039;, true],
                [null, false]
            ], done);
        });

        it(&#039;validates combination of min, max, alphanum, and required&#039;, function (done) {

            var rule = Joi.string().min(2).max(3).alphanum().required();
            Helper.validate(rule, [
                [&#039;x&#039;, false],
                [&#039;123&#039;, true],
                [&#039;1234&#039;, false],
                [&#039;12&#039;, true],
                [&#039;ab&#039;, true],
                [&#039;abc&#039;, true],
                [&#039;abcd&#039;, false],
                [&#039;*ab&#039;, false],
                [&#039;&#039;, false],
                [null, false]
            ], done);
        });

        it(&#039;validates combination of min, max, alphanum, and regex&#039;, function (done) {

            var rule = Joi.string().min(2).max(3).alphanum().regex(/^a/);
            Helper.validate(rule, [
                [&#039;x&#039;, false],
                [&#039;123&#039;, false],
                [&#039;1234&#039;, false],
                [&#039;12&#039;, false],
                [&#039;ab&#039;, true],
                [&#039;abc&#039;, true],
                [&#039;a2c&#039;, true],
                [&#039;abcd&#039;, false],
                [&#039;*ab&#039;, false],
                [&#039;&#039;, false],
                [null, false]
            ], done);
        });

        it(&#039;validates combination of min, max, alphanum, required, and regex&#039;, function (done) {

            var rule = Joi.string().min(2).max(3).alphanum().required().regex(/^a/);
            Helper.validate(rule, [
                [&#039;x&#039;, false],
                [&#039;123&#039;, false],
                [&#039;1234&#039;, false],
                [&#039;12&#039;, false],
                [&#039;ab&#039;, true],
                [&#039;abc&#039;, true],
                [&#039;a2c&#039;, true],
                [&#039;abcd&#039;, false],
                [&#039;*ab&#039;, false],
                [&#039;&#039;, false],
                [null, false]
            ], done);
        });

        it(&#039;validates combination of min, max, alphanum, allow(\&#039;\&#039;), and regex&#039;, function (done) {

            var rule = Joi.string().min(2).max(3).alphanum().allow(&#039;&#039;).regex(/^a/);
            Helper.validate(rule, [
                [&#039;x&#039;, false],
                [&#039;123&#039;, false],
                [&#039;1234&#039;, false],
                [&#039;12&#039;, false],
                [&#039;ab&#039;, true],
                [&#039;abc&#039;, true],
                [&#039;a2c&#039;, true],
                [&#039;abcd&#039;, false],
                [&#039;*ab&#039;, false],
                [&#039;&#039;, true],
                [null, false]
            ], done);
        });

        it(&#039;validates combination of email and min&#039;, function (done) {

            var rule = Joi.string().email().min(8);
            Helper.validate(rule, [
                [&#039;x@x.com&#039;, false],
                [&#039;123@x.com&#039;, true],
                [&#039;&#039;, false],
                [null, false]
            ], done);
        });

        it(&#039;validates combination of email, min, and max&#039;, function (done) {

            var rule = Joi.string().email().min(8).max(10);
            Helper.validate(rule, [
                [&#039;x@x.com&#039;, false],
                [&#039;123@x.com&#039;, true],
                [&#039;1234@x.com&#039;, true],
                [&#039;12345@x.com&#039;, false],
                [&#039;&#039;, false],
                [null, false]
            ], done);
        });

        it(&#039;validates combination of email, min, max, and invalid&#039;, function (done) {

            var rule = Joi.string().email().min(8).max(10).invalid(&#039;123@x.com&#039;);
            Helper.validate(rule, [
                [&#039;x@x.com&#039;, false],
                [&#039;123@x.com&#039;, false],
                [&#039;1234@x.com&#039;, true],
                [&#039;12345@x.com&#039;, false],
                [&#039;&#039;, false],
                [null, false]
            ], done);
        });

        it(&#039;validates combination of email, min, max, and allow&#039;, function (done) {

            var rule = Joi.string().email().min(8).max(10).allow(&#039;x@x.com&#039;);
            Helper.validate(rule, [
                [&#039;x@x.com&#039;, true],
                [&#039;123@x.com&#039;, true],
                [&#039;1234@x.com&#039;, true],
                [&#039;12345@x.com&#039;, false],
                [&#039;&#039;, false],
                [null, false]
            ], done);
        });

        it(&#039;validates combination of email, min, max, allow, and invalid&#039;, function (done) {

            var rule = Joi.string().email().min(8).max(10).allow(&#039;x@x.com&#039;).invalid(&#039;123@x.com&#039;);
            Helper.validate(rule, [
                [&#039;x@x.com&#039;, true],
                [&#039;123@x.com&#039;, false],
                [&#039;1234@x.com&#039;, true],
                [&#039;12345@x.com&#039;, false],
                [&#039;&#039;, false],
                [null, false]
            ], done);
        });

        it(&#039;validates combination of email, min, max, allow, invalid, and allow(\&#039;\&#039;)&#039;, function (done) {

            var rule = Joi.string().email().min(8).max(10).allow(&#039;x@x.com&#039;).invalid(&#039;123@x.com&#039;).allow(&#039;&#039;);
            Helper.validate(rule, [
                [&#039;x@x.com&#039;, true],
                [&#039;123@x.com&#039;, false],
                [&#039;1234@x.com&#039;, true],
                [&#039;12345@x.com&#039;, false],
                [&#039;&#039;, true],
                [null, false]
            ], done);
        });

        it(&#039;validates combination of email, min, max, allow, and allow(\&#039;\&#039;)&#039;, function (done) {

            var rule = Joi.string().email().min(8).max(10).allow(&#039;x@x.com&#039;).allow(&#039;&#039;);
            Helper.validate(rule, [
                [&#039;x@x.com&#039;, true],
                [&#039;123@x.com&#039;, true],
                [&#039;1234@x.com&#039;, true],
                [&#039;12345@x.com&#039;, false],
                [&#039;&#039;, true],
                [null, false]
            ], done);
        });

        it(&#039;validates combination of email, min, max, allow, invalid, and regex&#039;, function (done) {

            var rule = Joi.string().email().min(8).max(10).allow(&#039;x@x.com&#039;).invalid(&#039;123@x.com&#039;).regex(/^1/);
            Helper.validate(rule, [
                [&#039;x@x.com&#039;, true],
                [&#039;123@x.com&#039;, false],
                [&#039;1234@x.com&#039;, true],
                [&#039;12345@x.com&#039;, false],
                [&#039;&#039;, false],
                [null, false]
            ], done);
        });

        it(&#039;validates combination of email, min, max, allow, invalid, regex, and allow(\&#039;\&#039;)&#039;, function (done) {

            var rule = Joi.string().email().min(8).max(10).allow(&#039;x@x.com&#039;).invalid(&#039;123@x.com&#039;).regex(/^1/).allow(&#039;&#039;);
            Helper.validate(rule, [
                [&#039;x@x.com&#039;, true],
                [&#039;123@x.com&#039;, false],
                [&#039;1234@x.com&#039;, true],
                [&#039;12345@x.com&#039;, false],
                [&#039;&#039;, true],
                [null, false]
            ], done);
        });

        it(&#039;validates combination of email, min, max, and allow(\&#039;\&#039;)&#039;, function (done) {

            var rule = Joi.string().email().min(8).max(10).allow(&#039;&#039;);
            Helper.validate(rule, [
                [&#039;x@x.com&#039;, false],
                [&#039;123@x.com&#039;, true],
                [&#039;1234@x.com&#039;, true],
                [&#039;12345@x.com&#039;, false],
                [&#039;&#039;, true],
                [null, false]
            ], done);
        });

        it(&#039;validates combination of email, min, max, and regex&#039;, function (done) {

            var rule = Joi.string().email().min(8).max(10).regex(/^1234/);
            Helper.validate(rule, [
                [&#039;x@x.com&#039;, false],
                [&#039;123@x.com&#039;, false],
                [&#039;1234@x.com&#039;, true],
                [&#039;12345@x.com&#039;, false],
                [&#039;&#039;, false],
                [null, false]
            ], done);
        });

        it(&#039;validates combination of email, min, max, regex, and allow(\&#039;\&#039;)&#039;, function (done) {

            var rule = Joi.string().email().min(8).max(10).regex(/^1234/).allow(&#039;&#039;);
            Helper.validate(rule, [
                [&#039;x@x.com&#039;, false],
                [&#039;123@x.com&#039;, false],
                [&#039;1234@x.com&#039;, true],
                [&#039;12345@x.com&#039;, false],
                [&#039;&#039;, true],
                [null, false]
            ], done);
        });

        it(&#039;validates combination of email, min, max, regex, and required&#039;, function (done) {

            var rule = Joi.string().email().min(8).max(10).regex(/^1234/).required();
            Helper.validate(rule, [
                [&#039;x@x.com&#039;, false],
                [&#039;123@x.com&#039;, false],
                [&#039;1234@x.com&#039;, true],
                [&#039;12345@x.com&#039;, false],
                [&#039;&#039;, false],
                [null, false]
            ], done);
        });

        it(&#039;validates uri&#039;, function (done) {

            // Handful of tests taken from Node: https://github.com/joyent/node/blob/cfcb1de130867197cbc9c6012b7e84e08e53d032/test/simple/test-url.js
            // Also includes examples from RFC 8936: http://tools.ietf.org/html/rfc3986#page-7
            var schema = Joi.string().uri();

            Helper.validate(schema, [
                [&#039;foo://example.com:8042/over/there?name=ferret#nose&#039;, true],
                [&#039;urn:example:animal:ferret:nose&#039;, true],
                [&#039;ftp://ftp.is.co.za/rfc/rfc1808.txt&#039;, true],
                [&#039;http://www.ietf.org/rfc/rfc2396.txt&#039;, true],
                [&#039;ldap://[2001:db8::7]/c=GB?objectClass?one&#039;, true],
                [&#039;mailto:John.Doe@example.com&#039;, true],
                [&#039;news:comp.infosystems.www.servers.unix&#039;, true],
                [&#039;tel:+1-816-555-1212&#039;, true],
                [&#039;telnet://192.0.2.16:80/&#039;, true],
                [&#039;urn:oasis:names:specification:docbook:dtd:xml:4.1.2&#039;, true],
                [&#039;file:///example.txt&#039;, true],
                [&#039;http://asdf:qw%20er@localhost:8000?asdf=12345&amp;asda=fc%2F#bacon&#039;, true],
                [&#039;http://asdf@localhost:8000&#039;, true],
                [&#039;http://[v1.09azAZ-._~!$&amp;\&#039;()*+,;=:]&#039;, true],
                [&#039;http://[a:b:c:d:e::1.2.3.4]&#039;, true],
                [&#039;coap://[FEDC:BA98:7654:3210:FEDC:BA98:7654:3210]&#039;, true],
                [&#039;http://[1080:0:0:0:8:800:200C:417A]&#039;, true],
                [&#039;http://127.0.0.1:8000/foo?bar&#039;, true],
                [&#039;http://asdf:qwer@localhost:8000&#039;, true],
                [&#039;http://user:pass%3A@localhost:80&#039;, true],
                [&#039;http://localhost:123&#039;, true],
                [&#039;https://localhost:123&#039;, true],
                [&#039;file:///whatever&#039;, true],
                [&#039;mailto:asdf@asdf.com&#039;, true],
                [&#039;ftp://www.example.com&#039;, true],
                [&#039;javascript:alert(\&#039;hello\&#039;);&#039;, true], // eslint-disable-line no-script-url
                [&#039;xmpp:isaacschlueter@jabber.org&#039;, true],
                [&#039;f://some.host/path&#039;, true],
                [&#039;http://localhost:18/asdf&#039;, true],
                [&#039;http://localhost:42/asdf?qwer=zxcv&#039;, true],
                [&#039;HTTP://www.example.com/&#039;, true],
                [&#039;HTTP://www.example.com&#039;, true],
                [&#039;http://www.ExAmPlE.com/&#039;, true],
                [&#039;http://user:pw@www.ExAmPlE.com/&#039;, true],
                [&#039;http://USER:PW@www.ExAmPlE.com/&#039;, true],
                [&#039;http://user@www.example.com/&#039;, true],
                [&#039;http://user%3Apw@www.example.com/&#039;, true],
                [&#039;http://x.com/path?that%27s#all,%20folks&#039;, true],
                [&#039;HTTP://X.COM/Y&#039;, true],
                [&#039;http://www.narwhaljs.org/blog/categories?id=news&#039;, true],
                [&#039;http://mt0.google.com/vt/lyrs=m@114&amp;hl=en&amp;src=api&amp;x=2&amp;y=2&amp;z=3&amp;s=&#039;, true],
                [&#039;http://mt0.google.com/vt/lyrs=m@114???&amp;hl=en&amp;src=api&amp;x=2&amp;y=2&amp;z=3&amp;s=&#039;, true],
                [&#039;http://user:pass@mt0.google.com/vt/lyrs=m@114???&amp;hl=en&amp;src=api&amp;x=2&amp;y=2&amp;z=3&amp;s=&#039;, true],
                [&#039;http://_jabber._tcp.google.com:80/test&#039;, true],
                [&#039;http://user:pass@_jabber._tcp.google.com:80/test&#039;, true],
                [&#039;http://[fe80::1]/a/b?a=b#abc&#039;, true],
                [&#039;http://user:password@[3ffe:2a00:100:7031::1]:8080&#039;, true],
                [&#039;coap://[1080:0:0:0:8:800:200C:417A]:61616/&#039;, true],
                [&#039;git+http://github.com/joyent/node.git&#039;, true],
                [&#039;http://bucket_name.s3.amazonaws.com/image.jpg&#039;, true],
                [&#039;dot.test://foo/bar&#039;, true],
                [&#039;svn+ssh://foo/bar&#039;, true],
                [&#039;dash-test://foo/bar&#039;, true],
                [&#039;xmpp:isaacschlueter@jabber.org&#039;, true],
                [&#039;http://atpass:foo%40bar@127.0.0.1:8080/path?search=foo#bar&#039;, true],
                [&#039;javascript:alert(\&#039;hello\&#039;);&#039;, true], // eslint-disable-line no-script-url
                [&#039;file://localhost/etc/node/&#039;, true],
                [&#039;file:///etc/node/&#039;, true],
                [&#039;http://USER:PW@www.ExAmPlE.com/&#039;, true],
                [&#039;mailto:local1@domain1?query1&#039;, true],
                [&#039;http://example/a/b?c/../d&#039;, true],
                [&#039;http://example/x%2Fabc&#039;, true],
                [&#039;http://a/b/c/d;p=1/g;x=1/y&#039;, true],
                [&#039;http://a/b/c/g#s/../x&#039;, true],
                [&#039;http://a/b/c/.foo&#039;, true],
                [&#039;http://example.com/b//c//d;p?q#blarg&#039;, true],
                [&#039;g:h&#039;, true],
                [&#039;http://a/b/c/g&#039;, true],
                [&#039;http://a/b/c/g/&#039;, true],
                [&#039;http://a/g&#039;, true],
                [&#039;http://g&#039;, true],
                [&#039;http://a/b/c/d;p?y&#039;, true],
                [&#039;http://a/b/c/g?y&#039;, true],
                [&#039;http://a/b/c/d;p?q#s&#039;, true],
                [&#039;http://a/b/c/g#s&#039;, true],
                [&#039;http://a/b/c/g?y#s&#039;, true],
                [&#039;http://a/b/c/;x&#039;, true],
                [&#039;http://a/b/c/g;x&#039;, true],
                [&#039;http://a/b/c/g;x?y#s&#039;, true],
                [&#039;http://a/b/c/d;p?q&#039;, true],
                [&#039;http://a/b/c/&#039;, true],
                [&#039;http://a/b/&#039;, true],
                [&#039;http://a/b/g&#039;, true],
                [&#039;http://a/&#039;, true],
                [&#039;http://a/g&#039;, true],
                [&#039;http://a/g&#039;, true],
                [&#039;file:/asda&#039;, true],
                [&#039;qwerty&#039;, false],
                [&#039;invalid uri&#039;, false],
                [&#039;1http://google.com&#039;, false],
                [&#039;http://testdomain`,.&lt;&gt;/?\&#039;&quot;;{}][++\\|~!@#$%^&amp;*().org&#039;, false],
                [&#039;&#039;, false],
                [&#039;() &#039;, false],
                [&#039;one/two/three?value=abc&amp;value2=123#david-rules&#039;, false],
                [&#039;//username:password@test.example.com/one/two/three?value=abc&amp;value2=123#david-rules&#039;, false],
                [&#039;http://a\r&quot; \t\n&lt;\&#039;b:b@c\r\nd/e?f&#039;, false]
            ], done);
        });

        it(&#039;validates uri with a single scheme provided&#039;, function (done) {

            var schema = Joi.string().uri({
                scheme: &#039;http&#039;
            });

            Helper.validate(schema, [
                [&#039;http://google.com&#039;, true],
                [&#039;https://google.com&#039;, false],
                [&#039;ftp://google.com&#039;, false],
                [&#039;file:/asdf&#039;, false],
                [&#039;/path?query=value#hash&#039;, false]
            ], done);
        });

        it(&#039;validates uri with a single regex scheme provided&#039;, function (done) {

            var schema = Joi.string().uri({
                scheme: /https?/
            });

            Helper.validate(schema, [
                [&#039;http://google.com&#039;, true],
                [&#039;https://google.com&#039;, true],
                [&#039;ftp://google.com&#039;, false],
                [&#039;file:/asdf&#039;, false],
                [&#039;/path?query=value#hash&#039;, false]
            ], done);
        });

        it(&#039;validates uri with multiple schemes provided&#039;, function (done) {

            var schema = Joi.string().uri({
                scheme: [/https?/, &#039;ftp&#039;, &#039;file&#039;, &#039;git+http&#039;]
            });

            Helper.validate(schema, [
                [&#039;http://google.com&#039;, true],
                [&#039;https://google.com&#039;, true],
                [&#039;ftp://google.com&#039;, true],
                [&#039;file:/asdf&#039;, true],
                [&#039;git+http://github.com/hapijs/joi&#039;, true],
                [&#039;/path?query=value#hash&#039;, false]
            ], done);
        });

        it(&#039;validates uri with a friendly error message&#039;, function (done) {

            var schema = { item: Joi.string().uri() };

            Joi.compile(schema).validate({ item: &#039;something invalid&#039; }, function (err, value) {

                expect(err.message).to.contain(&#039;must be a valid uri&#039;);
                done();
            });
        });

        it(&#039;validates uri with a custom scheme with a friendly error message&#039;, function (done) {

            var schema = {
                item: Joi.string().uri({
                    scheme: &#039;http&#039;
                })
            };

            Joi.compile(schema).validate({ item: &#039;something invalid&#039; }, function (err, value) {

                expect(err.message).to.contain(&#039;must be a valid uri with a scheme matching the http pattern&#039;);
                done();
            });
        });

        it(&#039;validates uri with a custom array of schemes with a friendly error message&#039;, function (done) {

            var schema = {
                item: Joi.string().uri({
                    scheme: [&#039;http&#039;, /https?/]
                })
            };

            Joi.compile(schema).validate({ item: &#039;something invalid&#039; }, function (err, value) {

                expect(err.message).to.contain(&#039;must be a valid uri with a scheme matching the http|https? pattern&#039;);
                done();
            });
        });

        it(&#039;validates uri treats scheme as optional&#039;, function (done) {

            expect(function () {

                Joi.string().uri({});
            }).to.not.throw();

            done();
        });

        it(&#039;validates uri requires uriOptions as an object with a friendly error message&#039;, function (done) {

            expect(function () {

                Joi.string().uri(&#039;http&#039;);
            }).to.throw(Error, &#039;options must be an object&#039;);

            done();
        });

        it(&#039;validates uri requires scheme to be a RegExp, String, or Array with a friendly error message&#039;, function (done) {

            expect(function () {

                Joi.string().uri({
                    scheme: {}
                });
            }).to.throw(Error, &#039;scheme must be a RegExp, String, or Array&#039;);

            done();
        });

        it(&#039;validates uri requires scheme to not be an empty array&#039;, function (done) {

            expect(function () {

                Joi.string().uri({
                    scheme: []
                });
            }).to.throw(Error, &#039;scheme must have at least 1 scheme specified&#039;);

            done();
        });

        it(&#039;validates uri requires scheme to be an Array of schemes to all be valid schemes with a friendly error message&#039;, function (done) {

            expect(function () {

                Joi.string().uri({
                    scheme: [
                        &#039;http&#039;,
                        &#039;~!@#$%^&amp;*()_&#039;
                    ]
                });
            }).to.throw(Error, &#039;scheme at position 1 must be a valid scheme&#039;);

            done();
        });

        it(&#039;validates uri requires scheme to be an Array of schemes to be strings or RegExp&#039;, function (done) {

            expect(function () {

                Joi.string().uri({
                    scheme: [
                        &#039;http&#039;,
                        {}
                    ]
                });
            }).to.throw(Error, &#039;scheme at position 1 must be a RegExp or String&#039;);

            done();
        });

        it(&#039;validates uri requires scheme to be a valid String scheme with a friendly error message&#039;, function (done) {

            expect(function () {

                Joi.string().uri({
                    scheme: &#039;~!@#$%^&amp;*()_&#039;
                });
            }).to.throw(Error, &#039;scheme at position 0 must be a valid scheme&#039;);

            done();
        });

        it(&#039;validates isoDate&#039;, function (done) {

            Helper.validate(Joi.string().isoDate(), [
                [&#039;2013-06-07T14:21:46.295Z&#039;, true],
                [&#039;2013-06-07T14:21:46.295Z0&#039;, false],
                [&#039;2013-06-07T14:21:46.295+07:00&#039;, true],
                [&#039;2013-06-07T14:21:46.295+07:000&#039;, false],
                [&#039;2013-06-07T14:21:46.295-07:00&#039;, true],
                [&#039;2013-06-07T14:21:46Z&#039;, true],
                [&#039;2013-06-07T14:21:46Z0&#039;, false],
                [&#039;2013-06-07T14:21:46+07:00&#039;, true],
                [&#039;2013-06-07T14:21:46+07:000&#039;, false],
                [&#039;2013-06-07T14:21:46-07:00&#039;, true],
                [&#039;2013-06-07T14:21Z&#039;, true],
                [&#039;2013-06-07T14:21+07:00&#039;, true],
                [&#039;2013-06-07T14:21+07:000&#039;, false],
                [&#039;2013-06-07T14:21-07:00&#039;, true],
                [&#039;2013-06-07T14:21Z+7:00&#039;, false],
                [&#039;2013-06-07&#039;, true],
                [&#039;2013-06-07T&#039;, false],
                [&#039;2013-06-07T14:21&#039;, true],
                [&#039;1-1-2013&#039;, false],
                [&#039;2013-06-07T14.2334,4&#039;, true],
                [&#039;2013-06-07T14,23:34&#039;, false],
                [&#039;2013-06-07T24&#039;, false],
                [&#039;2013-06-07T24:00&#039;, true],
                [&#039;2013-06-07T24:21&#039;, false],
                [&#039;2013-06-07 142146.295&#039;, true],
                [&#039;2013-06-07 146946.295&#039;, false],
                [&#039;2013-06-07 1421,44&#039;, true],
                [&#039;2013-W23&#039;, true],
                [&#039;2013-W23-1&#039;, true],
                [&#039;2013-W2311&#039;, false],
                [&#039;2013-W231&#039;, true],
                [&#039;2013-M231&#039;, false],
                [&#039;2013-W23-1T14:21&#039;, true],
                [&#039;2013-W23-1T14:21:&#039;, false],
                [&#039;2013-W23-1T14:21:46+07:00&#039;, true],
                [&#039;2013-W23-1T14:21:46+07:000&#039;, false],
                [&#039;2013-W23-1T14:21:46-07:00&#039;, true],
                [&#039;2013-184&#039;, true],
                [&#039;2013-1841&#039;, false]
            ], done);
        });

        it(&#039;validates isoDate with a friendly error message&#039;, function (done) {

            var schema = { item: Joi.string().isoDate() };
            Joi.compile(schema).validate({ item: &#039;something&#039; }, function (err, value) {

                expect(err.message).to.contain(&#039;must be a valid ISO 8601 date&#039;);
                done();
            });
        });

        it(&#039;validates combination of isoDate and min&#039;, function (done) {

            var rule = Joi.string().isoDate().min(23);
            Helper.validate(rule, [
                [&#039;2013-06-07T14:21:46.295Z&#039;, true],
                [&#039;2013-06-07T14:21:46.295Z0&#039;, false],
                [&#039;2013-06-07T14:21:46.295+07:00&#039;, true],
                [&#039;2013-06-07T14:21:46.295+07:000&#039;, false],
                [&#039;2013-06-07T14:21:46.295-07:00&#039;, true],
                [&#039;2013-06-07T14:21:46Z&#039;, false],
                [&#039;2013-06-07T14:21:46Z0&#039;, false],
                [&#039;2013-06-07T14:21:46+07:00&#039;, true],
                [&#039;2013-06-07T14:21:46-07:00&#039;, true],
                [&#039;2013-06-07T14:21Z&#039;, false],
                [&#039;2013-06-07T14:21+07:00&#039;, false],
                [&#039;2013-06-07T14:21+07:000&#039;, false],
                [&#039;2013-06-07T14:21-07:00&#039;, false],
                [&#039;2013-06-07T14:21Z+7:00&#039;, false],
                [&#039;2013-06-07&#039;, false],
                [&#039;2013-06-07T&#039;, false],
                [&#039;2013-06-07T14:21&#039;, false],
                [&#039;1-1-2013&#039;, false],
                [&#039;&#039;, false],
                [null, false]
            ], done);
        });

        it(&#039;validates combination of isoDate, min and max&#039;, function (done) {

            var rule = Joi.string().isoDate().min(17).max(23);
            Helper.validate(rule, [
                [&#039;2013-06-07T14:21:46.295Z&#039;, false],
                [&#039;2013-06-07T14:21:46.295Z0&#039;, false],
                [&#039;2013-06-07T14:21:46.295+07:00&#039;, false],
                [&#039;2013-06-07T14:21:46.295+07:000&#039;, false],
                [&#039;2013-06-07T14:21:46.295-07:00&#039;, false],
                [&#039;2013-06-07T14:21:46Z&#039;, true],
                [&#039;2013-06-07T14:21:46Z0&#039;, false],
                [&#039;2013-06-07T14:21:46+07:00&#039;, false],
                [&#039;2013-06-07T14:21:46-07:00&#039;, false],
                [&#039;2013-06-07T14:21Z&#039;, true],
                [&#039;2013-06-07T14:21+07:00&#039;, true],
                [&#039;2013-06-07T14:21+07:000&#039;, false],
                [&#039;2013-06-07T14:21-07:00&#039;, true],
                [&#039;2013-06-07T14:21Z+7:00&#039;, false],
                [&#039;2013-06-07&#039;, false],
                [&#039;2013-06-07T&#039;, false],
                [&#039;2013-06-07T14:21&#039;, false],
                [&#039;1-1-2013&#039;, false],
                [&#039;&#039;, false],
                [null, false]
            ], done);
        });

        it(&#039;validates combination of isoDate, min, max and invalid&#039;, function (done) {

            var rule = Joi.string().isoDate().min(17).max(23).invalid(&#039;2013-06-07T14:21+07:00&#039;);
            Helper.validate(rule, [
                [&#039;2013-06-07T14:21:46.295Z&#039;, false],
                [&#039;2013-06-07T14:21:46.295Z0&#039;, false],
                [&#039;2013-06-07T14:21:46.295+07:00&#039;, false],
                [&#039;2013-06-07T14:21:46.295+07:000&#039;, false],
                [&#039;2013-06-07T14:21:46.295-07:00&#039;, false],
                [&#039;2013-06-07T14:21:46Z&#039;, true],
                [&#039;2013-06-07T14:21:46Z0&#039;, false],
                [&#039;2013-06-07T14:21:46+07:00&#039;, false],
                [&#039;2013-06-07T14:21:46-07:00&#039;, false],
                [&#039;2013-06-07T14:21Z&#039;, true],
                [&#039;2013-06-07T14:21+07:00&#039;, false],
                [&#039;2013-06-07T14:21+07:000&#039;, false],
                [&#039;2013-06-07T14:21-07:00&#039;, true],
                [&#039;2013-06-07T14:21Z+7:00&#039;, false],
                [&#039;2013-06-07&#039;, false],
                [&#039;2013-06-07T&#039;, false],
                [&#039;2013-06-07T14:21&#039;, false],
                [&#039;1-1-2013&#039;, false],
                [&#039;&#039;, false],
                [null, false]
            ], done);
        });

        it(&#039;validates combination of isoDate, min, max and allow&#039;, function (done) {

            var rule = Joi.string().isoDate().min(17).max(23).allow(&#039;2013-06-07T14:21:46.295+07:00&#039;);
            Helper.validate(rule, [
                [&#039;2013-06-07T14:21:46.295Z&#039;, false],
                [&#039;2013-06-07T14:21:46.295Z0&#039;, false],
                [&#039;2013-06-07T14:21:46.295+07:00&#039;, true],
                [&#039;2013-06-07T14:21:46.295+07:000&#039;, false],
                [&#039;2013-06-07T14:21:46.295-07:00&#039;, false],
                [&#039;2013-06-07T14:21:46Z&#039;, true],
                [&#039;2013-06-07T14:21:46Z0&#039;, false],
                [&#039;2013-06-07T14:21:46+07:00&#039;, false],
                [&#039;2013-06-07T14:21:46-07:00&#039;, false],
                [&#039;2013-06-07T14:21Z&#039;, true],
                [&#039;2013-06-07T14:21+07:00&#039;, true],
                [&#039;2013-06-07T14:21+07:000&#039;, false],
                [&#039;2013-06-07T14:21-07:00&#039;, true],
                [&#039;2013-06-07T14:21Z+7:00&#039;, false],
                [&#039;2013-06-07&#039;, false],
                [&#039;2013-06-07T&#039;, false],
                [&#039;2013-06-07T14:21&#039;, false],
                [&#039;1-1-2013&#039;, false],
                [&#039;&#039;, false],
                [null, false]
            ], done);
        });

        it(&#039;validates combination of isoDate, min, max, allow and invalid&#039;, function (done) {

            var rule = Joi.string().isoDate().min(17).max(23).allow(&#039;2013-06-07T14:21:46.295+07:00&#039;).invalid(&#039;2013-06-07T14:21+07:00&#039;);
            Helper.validate(rule, [
                [&#039;2013-06-07T14:21:46.295Z&#039;, false],
                [&#039;2013-06-07T14:21:46.295Z0&#039;, false],
                [&#039;2013-06-07T14:21:46.295+07:00&#039;, true],
                [&#039;2013-06-07T14:21:46.295+07:000&#039;, false],
                [&#039;2013-06-07T14:21:46.295-07:00&#039;, false],
                [&#039;2013-06-07T14:21:46Z&#039;, true],
                [&#039;2013-06-07T14:21:46Z0&#039;, false],
                [&#039;2013-06-07T14:21:46+07:00&#039;, false],
                [&#039;2013-06-07T14:21:46-07:00&#039;, false],
                [&#039;2013-06-07T14:21Z&#039;, true],
                [&#039;2013-06-07T14:21+07:00&#039;, false],
                [&#039;2013-06-07T14:21+07:000&#039;, false],
                [&#039;2013-06-07T14:21-07:00&#039;, true],
                [&#039;2013-06-07T14:21Z+7:00&#039;, false],
                [&#039;2013-06-07&#039;, false],
                [&#039;2013-06-07T&#039;, false],
                [&#039;2013-06-07T14:21&#039;, false],
                [&#039;1-1-2013&#039;, false],
                [&#039;&#039;, false],
                [null, false]
            ], done);
        });

        it(&#039;validates combination of isoDate, min, max, allow, invalid and allow(\&#039;\&#039;)&#039;, function (done) {

            var rule = Joi.string().isoDate().min(17).max(23).allow(&#039;2013-06-07T14:21:46.295+07:00&#039;).invalid(&#039;2013-06-07T14:21+07:00&#039;).allow(&#039;&#039;);
            Helper.validate(rule, [
                [&#039;2013-06-07T14:21:46.295Z&#039;, false],
                [&#039;2013-06-07T14:21:46.295Z0&#039;, false],
                [&#039;2013-06-07T14:21:46.295+07:00&#039;, true],
                [&#039;2013-06-07T14:21:46.295+07:000&#039;, false],
                [&#039;2013-06-07T14:21:46.295-07:00&#039;, false],
                [&#039;2013-06-07T14:21:46Z&#039;, true],
                [&#039;2013-06-07T14:21:46Z0&#039;, false],
                [&#039;2013-06-07T14:21:46+07:00&#039;, false],
                [&#039;2013-06-07T14:21:46-07:00&#039;, false],
                [&#039;2013-06-07T14:21Z&#039;, true],
                [&#039;2013-06-07T14:21+07:00&#039;, false],
                [&#039;2013-06-07T14:21+07:000&#039;, false],
                [&#039;2013-06-07T14:21-07:00&#039;, true],
                [&#039;2013-06-07T14:21Z+7:00&#039;, false],
                [&#039;2013-06-07&#039;, false],
                [&#039;2013-06-07T&#039;, false],
                [&#039;2013-06-07T14:21&#039;, false],
                [&#039;1-1-2013&#039;, false],
                [&#039;&#039;, true],
                [null, false]
            ], done);
        });

        it(&#039;validates combination of isoDate, min, max, allow, invalid and allow(\&#039;\&#039;)&#039;, function (done) {

            var rule = Joi.string().isoDate().min(17).max(23).allow(&#039;2013-06-07T14:21:46.295+07:00&#039;).allow(&#039;&#039;);
            Helper.validate(rule, [
                [&#039;2013-06-07T14:21:46.295Z&#039;, false],
                [&#039;2013-06-07T14:21:46.295Z0&#039;, false],
                [&#039;2013-06-07T14:21:46.295+07:00&#039;, true],
                [&#039;2013-06-07T14:21:46.295+07:000&#039;, false],
                [&#039;2013-06-07T14:21:46.295-07:00&#039;, false],
                [&#039;2013-06-07T14:21:46Z&#039;, true],
                [&#039;2013-06-07T14:21:46Z0&#039;, false],
                [&#039;2013-06-07T14:21:46+07:00&#039;, false],
                [&#039;2013-06-07T14:21:46-07:00&#039;, false],
                [&#039;2013-06-07T14:21Z&#039;, true],
                [&#039;2013-06-07T14:21+07:00&#039;, true],
                [&#039;2013-06-07T14:21+07:000&#039;, false],
                [&#039;2013-06-07T14:21-07:00&#039;, true],
                [&#039;2013-06-07T14:21Z+7:00&#039;, false],
                [&#039;2013-06-07&#039;, false],
                [&#039;2013-06-07T&#039;, false],
                [&#039;2013-06-07T14:21&#039;, false],
                [&#039;1-1-2013&#039;, false],
                [&#039;&#039;, true],
                [null, false]
            ], done);
        });

        it(&#039;validates combination of isoDate, min, max, allow, invalid and regex&#039;, function (done) {

            var rule = Joi.string().isoDate().min(17).max(23).allow(&#039;2013-06-07T14:21:46.295+07:00&#039;).invalid(&#039;2013-06-07T14:21Z&#039;).regex(/Z$/);
            Helper.validate(rule, [
                [&#039;2013-06-07T14:21:46.295Z&#039;, false],
                [&#039;2013-06-07T14:21:46.295Z0&#039;, false],
                [&#039;2013-06-07T14:21:46.295+07:00&#039;, true],
                [&#039;2013-06-07T14:21:46.295+07:000&#039;, false],
                [&#039;2013-06-07T14:21:46.295-07:00&#039;, false],
                [&#039;2013-06-07T14:21:46Z&#039;, true],
                [&#039;2013-06-07T14:21:46Z0&#039;, false],
                [&#039;2013-06-07T14:21:46+07:00&#039;, false],
                [&#039;2013-06-07T14:21:46-07:00&#039;, false],
                [&#039;2013-06-07T14:21Z&#039;, false],
                [&#039;2013-06-07T14:21+07:00&#039;, false],
                [&#039;2013-06-07T14:21+07:000&#039;, false],
                [&#039;2013-06-07T14:21-07:00&#039;, false],
                [&#039;2013-06-07T14:21Z+7:00&#039;, false],
                [&#039;2013-06-07&#039;, false],
                [&#039;2013-06-07T&#039;, false],
                [&#039;2013-06-07T14:21&#039;, false],
                [&#039;1-1-2013&#039;, false],
                [&#039;&#039;, false],
                [null, false]
            ], done);
        });

        it(&#039;validates combination of isoDate, min, max, allow, invalid, regex and allow(\&#039;\&#039;)&#039;, function (done) {

            var rule = Joi.string().isoDate().min(17).max(23).allow(&#039;2013-06-07T14:21:46.295+07:00&#039;).invalid(&#039;2013-06-07T14:21Z&#039;).regex(/Z$/).allow(&#039;&#039;);
            Helper.validate(rule, [
                [&#039;2013-06-07T14:21:46.295Z&#039;, false],
                [&#039;2013-06-07T14:21:46.295Z0&#039;, false],
                [&#039;2013-06-07T14:21:46.295+07:00&#039;, true],
                [&#039;2013-06-07T14:21:46.295+07:000&#039;, false],
                [&#039;2013-06-07T14:21:46.295-07:00&#039;, false],
                [&#039;2013-06-07T14:21:46Z&#039;, true],
                [&#039;2013-06-07T14:21:46Z0&#039;, false],
                [&#039;2013-06-07T14:21:46+07:00&#039;, false],
                [&#039;2013-06-07T14:21:46-07:00&#039;, false],
                [&#039;2013-06-07T14:21Z&#039;, false],
                [&#039;2013-06-07T14:21+07:00&#039;, false],
                [&#039;2013-06-07T14:21+07:000&#039;, false],
                [&#039;2013-06-07T14:21-07:00&#039;, false],
                [&#039;2013-06-07T14:21Z+7:00&#039;, false],
                [&#039;2013-06-07&#039;, false],
                [&#039;2013-06-07T&#039;, false],
                [&#039;2013-06-07T14:21&#039;, false],
                [&#039;1-1-2013&#039;, false],
                [&#039;&#039;, true],
                [null, false]
            ], done);
        });

        it(&#039;validates combination of isoDate, min, max and allow(\&#039;\&#039;)&#039;, function (done) {

            var rule = Joi.string().isoDate().min(17).max(23).allow(&#039;&#039;);
            Helper.validate(rule, [
                [&#039;2013-06-07T14:21:46.295Z&#039;, false],
                [&#039;2013-06-07T14:21:46.295Z0&#039;, false],
                [&#039;2013-06-07T14:21:46.295+07:00&#039;, false],
                [&#039;2013-06-07T14:21:46.295+07:000&#039;, false],
                [&#039;2013-06-07T14:21:46.295-07:00&#039;, false],
                [&#039;2013-06-07T14:21:46Z&#039;, true],
                [&#039;2013-06-07T14:21:46Z0&#039;, false],
                [&#039;2013-06-07T14:21:46+07:00&#039;, false],
                [&#039;2013-06-07T14:21:46-07:00&#039;, false],
                [&#039;2013-06-07T14:21Z&#039;, true],
                [&#039;2013-06-07T14:21+07:00&#039;, true],
                [&#039;2013-06-07T14:21+07:000&#039;, false],
                [&#039;2013-06-07T14:21-07:00&#039;, true],
                [&#039;2013-06-07T14:21Z+7:00&#039;, false],
                [&#039;2013-06-07&#039;, false],
                [&#039;2013-06-07T&#039;, false],
                [&#039;2013-06-07T14:21&#039;, false],
                [&#039;1-1-2013&#039;, false],
                [&#039;&#039;, true],
                [null, false]
            ], done);
        });

        it(&#039;validates combination of isoDate, min, max and regex&#039;, function (done) {

            var rule = Joi.string().isoDate().min(17).max(23).regex(/Z$/);
            Helper.validate(rule, [
                [&#039;2013-06-07T14:21:46.295Z&#039;, false],
                [&#039;2013-06-07T14:21:46.295Z0&#039;, false],
                [&#039;2013-06-07T14:21:46.295+07:00&#039;, false],
                [&#039;2013-06-07T14:21:46.295+07:000&#039;, false],
                [&#039;2013-06-07T14:21:46.295-07:00&#039;, false],
                [&#039;2013-06-07T14:21:46Z&#039;, true],
                [&#039;2013-06-07T14:21:46Z0&#039;, false],
                [&#039;2013-06-07T14:21:46+07:00&#039;, false],
                [&#039;2013-06-07T14:21:46-07:00&#039;, false],
                [&#039;2013-06-07T14:21Z&#039;, true],
                [&#039;2013-06-07T14:21+07:00&#039;, false],
                [&#039;2013-06-07T14:21+07:000&#039;, false],
                [&#039;2013-06-07T14:21-07:00&#039;, false],
                [&#039;2013-06-07T14:21Z+7:00&#039;, false],
                [&#039;2013-06-07&#039;, false],
                [&#039;2013-06-07T&#039;, false],
                [&#039;2013-06-07T14:21&#039;, false],
                [&#039;1-1-2013&#039;, false],
                [&#039;&#039;, false],
                [null, false]
            ], done);
        });

        it(&#039;validates combination of isoDate, min, max, regex and allow(\&#039;\&#039;)&#039;, function (done) {

            var rule = Joi.string().isoDate().min(17).max(23).regex(/Z$/).allow(&#039;&#039;);
            Helper.validate(rule, [
                [&#039;2013-06-07T14:21:46.295Z&#039;, false],
                [&#039;2013-06-07T14:21:46.295Z0&#039;, false],
                [&#039;2013-06-07T14:21:46.295+07:00&#039;, false],
                [&#039;2013-06-07T14:21:46.295+07:000&#039;, false],
                [&#039;2013-06-07T14:21:46.295-07:00&#039;, false],
                [&#039;2013-06-07T14:21:46Z&#039;, true],
                [&#039;2013-06-07T14:21:46Z0&#039;, false],
                [&#039;2013-06-07T14:21:46+07:00&#039;, false],
                [&#039;2013-06-07T14:21:46-07:00&#039;, false],
                [&#039;2013-06-07T14:21Z&#039;, true],
                [&#039;2013-06-07T14:21+07:00&#039;, false],
                [&#039;2013-06-07T14:21+07:000&#039;, false],
                [&#039;2013-06-07T14:21-07:00&#039;, false],
                [&#039;2013-06-07T14:21Z+7:00&#039;, false],
                [&#039;2013-06-07&#039;, false],
                [&#039;2013-06-07T&#039;, false],
                [&#039;2013-06-07T14:21&#039;, false],
                [&#039;1-1-2013&#039;, false],
                [&#039;&#039;, true],
                [null, false]
            ], done);
        });

        it(&#039;validates combination of isoDate, min, max, regex and required&#039;, function (done) {

            var rule = Joi.string().isoDate().min(17).max(23).regex(/Z$/).required();
            Helper.validate(rule, [
                [&#039;2013-06-07T14:21:46.295Z&#039;, false],
                [&#039;2013-06-07T14:21:46.295Z0&#039;, false],
                [&#039;2013-06-07T14:21:46.295+07:00&#039;, false],
                [&#039;2013-06-07T14:21:46.295+07:000&#039;, false],
                [&#039;2013-06-07T14:21:46.295-07:00&#039;, false],
                [&#039;2013-06-07T14:21:46Z&#039;, true],
                [&#039;2013-06-07T14:21:46Z0&#039;, false],
                [&#039;2013-06-07T14:21:46+07:00&#039;, false],
                [&#039;2013-06-07T14:21:46-07:00&#039;, false],
                [&#039;2013-06-07T14:21Z&#039;, true],
                [&#039;2013-06-07T14:21+07:00&#039;, false],
                [&#039;2013-06-07T14:21+07:000&#039;, false],
                [&#039;2013-06-07T14:21-07:00&#039;, false],
                [&#039;2013-06-07T14:21Z+7:00&#039;, false],
                [&#039;2013-06-07&#039;, false],
                [&#039;2013-06-07T&#039;, false],
                [&#039;2013-06-07T14:21&#039;, false],
                [&#039;1-1-2013&#039;, false],
                [&#039;&#039;, false],
                [null, false]
            ], done);
        });

        it(&#039;validates guid&#039;, function (done) {

            Helper.validate(Joi.string().guid(), [
                [&#039;{D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D}&#039;, true],
                [&#039;{B59511BD6A5F4DF09ECF562A108D8A2E}&#039;, true],
                [&#039;69593D62-71EA-4548-85E4-04FC71357423&#039;, true],
                [&#039;677E2553DD4D43B09DA77414DB1EB8EA&#039;, true],
                [&#039;{5ba3bba3-729a-4717-88c1-b7c4b7ba80db}&#039;, true],
                [&#039;{7e9081b59a6d4cc1a8c347f69fb4198d}&#039;, true],
                [&#039;0c74f13f-fa83-4c48-9b33-68921dd72463&#039;, true],
                [&#039;b4b2fb69c6244e5eb0698e0c6ec66618&#039;, true],
                [&#039;{283B67B2-430F-4E6F-97E6-19041992-C1B0}&#039;, false],
                [&#039;{D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D&#039;, false],
                [&#039;D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D}&#039;, false]
            ], done);
        });

        it(&#039;validates guid with a friendly error message&#039;, function (done) {

            var schema = { item: Joi.string().guid() };
            Joi.compile(schema).validate({ item: &#039;something&#039; }, function (err, value) {

                expect(err.message).to.contain(&#039;must be a valid GUID&#039;);
                done();
            });
        });

        it(&#039;validates combination of guid and min&#039;, function (done) {

            var rule = Joi.string().guid().min(36);
            Helper.validate(rule, [
                [&#039;{D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D}&#039;, true],
                [&#039;{B59511BD6A5F4DF09ECF562A108D8A2E}&#039;, false],
                [&#039;69593D62-71EA-4548-85E4-04FC71357423&#039;, true],
                [&#039;677E2553DD4D43B09DA77414DB1EB8EA&#039;, false],
                [&#039;{5ba3bba3-729a-4717-88c1-b7c4b7ba80db}&#039;, true],
                [&#039;{7e9081b59a6d4cc1a8c347f69fb4198d}&#039;, false],
                [&#039;0c74f13f-fa83-4c48-9b33-68921dd72463&#039;, true],
                [&#039;b4b2fb69c6244e5eb0698e0c6ec66618&#039;, false],
                [&#039;{283B67B2-430F-4E6F-97E6-19041992-C1B0}&#039;, false],
                [&#039;{D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D&#039;, false],
                [&#039;D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D}&#039;, false],
                [&#039;&#039;, false],
                [null, false]
            ], done);
        });

        it(&#039;validates combination of guid, min and max&#039;, function (done) {

            var rule = Joi.string().guid().min(32).max(34);
            Helper.validate(rule, [
                [&#039;{D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D}&#039;, false],
                [&#039;{B59511BD6A5F4DF09ECF562A108D8A2E}&#039;, true],
                [&#039;69593D62-71EA-4548-85E4-04FC71357423&#039;, false],
                [&#039;677E2553DD4D43B09DA77414DB1EB8EA&#039;, true],
                [&#039;{5ba3bba3-729a-4717-88c1-b7c4b7ba80db}&#039;, false],
                [&#039;{7e9081b59a6d4cc1a8c347f69fb4198d}&#039;, true],
                [&#039;0c74f13f-fa83-4c48-9b33-68921dd72463&#039;, false],
                [&#039;b4b2fb69c6244e5eb0698e0c6ec66618&#039;, true],
                [&#039;{283B67B2-430F-4E6F-97E6-19041992-C1B0}&#039;, false],
                [&#039;{D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D&#039;, false],
                [&#039;D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D}&#039;, false],
                [&#039;&#039;, false],
                [null, false]
            ], done);
        });

        it(&#039;validates combination of guid, min, max and invalid&#039;, function (done) {

            var rule = Joi.string().guid().min(32).max(34).invalid(&#039;b4b2fb69c6244e5eb0698e0c6ec66618&#039;);
            Helper.validate(rule, [
                [&#039;{D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D}&#039;, false],
                [&#039;{B59511BD6A5F4DF09ECF562A108D8A2E}&#039;, true],
                [&#039;69593D62-71EA-4548-85E4-04FC71357423&#039;, false],
                [&#039;677E2553DD4D43B09DA77414DB1EB8EA&#039;, true],
                [&#039;{5ba3bba3-729a-4717-88c1-b7c4b7ba80db}&#039;, false],
                [&#039;{7e9081b59a6d4cc1a8c347f69fb4198d}&#039;, true],
                [&#039;0c74f13f-fa83-4c48-9b33-68921dd72463&#039;, false],
                [&#039;b4b2fb69c6244e5eb0698e0c6ec66618&#039;, false],
                [&#039;{283B67B2-430F-4E6F-97E6-19041992-C1B0}&#039;, false],
                [&#039;{D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D&#039;, false],
                [&#039;D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D}&#039;, false],
                [&#039;&#039;, false],
                [null, false]
            ], done);
        });

        it(&#039;validates combination of guid, min, max and allow&#039;, function (done) {

            var rule = Joi.string().guid().min(32).max(34).allow(&#039;{D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D&#039;);
            Helper.validate(rule, [
                [&#039;{D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D}&#039;, false],
                [&#039;{B59511BD6A5F4DF09ECF562A108D8A2E}&#039;, true],
                [&#039;69593D62-71EA-4548-85E4-04FC71357423&#039;, false],
                [&#039;677E2553DD4D43B09DA77414DB1EB8EA&#039;, true],
                [&#039;{5ba3bba3-729a-4717-88c1-b7c4b7ba80db}&#039;, false],
                [&#039;{7e9081b59a6d4cc1a8c347f69fb4198d}&#039;, true],
                [&#039;0c74f13f-fa83-4c48-9b33-68921dd72463&#039;, false],
                [&#039;b4b2fb69c6244e5eb0698e0c6ec66618&#039;, true],
                [&#039;{283B67B2-430F-4E6F-97E6-19041992-C1B0}&#039;, false],
                [&#039;{D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D&#039;, true],
                [&#039;D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D}&#039;, false],
                [&#039;&#039;, false],
                [null, false]
            ], done);
        });

        it(&#039;validates combination of guid, min, max, allow and invalid&#039;, function (done) {

            var rule = Joi.string().guid().min(32).max(34).allow(&#039;{D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D&#039;).invalid(&#039;b4b2fb69c6244e5eb0698e0c6ec66618&#039;);
            Helper.validate(rule, [
                [&#039;{D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D}&#039;, false],
                [&#039;{B59511BD6A5F4DF09ECF562A108D8A2E}&#039;, true],
                [&#039;69593D62-71EA-4548-85E4-04FC71357423&#039;, false],
                [&#039;677E2553DD4D43B09DA77414DB1EB8EA&#039;, true],
                [&#039;{5ba3bba3-729a-4717-88c1-b7c4b7ba80db}&#039;, false],
                [&#039;{7e9081b59a6d4cc1a8c347f69fb4198d}&#039;, true],
                [&#039;0c74f13f-fa83-4c48-9b33-68921dd72463&#039;, false],
                [&#039;b4b2fb69c6244e5eb0698e0c6ec66618&#039;, false],
                [&#039;{283B67B2-430F-4E6F-97E6-19041992-C1B0}&#039;, false],
                [&#039;{D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D&#039;, true],
                [&#039;D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D}&#039;, false],
                [&#039;&#039;, false],
                [null, false]
            ], done);
        });

        it(&#039;validates combination of guid, min, max, allow, invalid and allow(\&#039;\&#039;)&#039;, function (done) {

            var rule = Joi.string().guid().min(32).max(34).allow(&#039;{D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D&#039;).invalid(&#039;b4b2fb69c6244e5eb0698e0c6ec66618&#039;).allow(&#039;&#039;);
            Helper.validate(rule, [
                [&#039;{D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D}&#039;, false],
                [&#039;{B59511BD6A5F4DF09ECF562A108D8A2E}&#039;, true],
                [&#039;69593D62-71EA-4548-85E4-04FC71357423&#039;, false],
                [&#039;677E2553DD4D43B09DA77414DB1EB8EA&#039;, true],
                [&#039;{5ba3bba3-729a-4717-88c1-b7c4b7ba80db}&#039;, false],
                [&#039;{7e9081b59a6d4cc1a8c347f69fb4198d}&#039;, true],
                [&#039;0c74f13f-fa83-4c48-9b33-68921dd72463&#039;, false],
                [&#039;b4b2fb69c6244e5eb0698e0c6ec66618&#039;, false],
                [&#039;{283B67B2-430F-4E6F-97E6-19041992-C1B0}&#039;, false],
                [&#039;{D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D&#039;, true],
                [&#039;D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D}&#039;, false],
                [&#039;&#039;, true],
                [null, false]
            ], done);
        });

        it(&#039;validates combination of guid, min, max, allow and allow(\&#039;\&#039;)&#039;, function (done) {

            var rule = Joi.string().guid().min(32).max(34).allow(&#039;{D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D&#039;).allow(&#039;&#039;);
            Helper.validate(rule, [
                [&#039;{D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D}&#039;, false],
                [&#039;{B59511BD6A5F4DF09ECF562A108D8A2E}&#039;, true],
                [&#039;69593D62-71EA-4548-85E4-04FC71357423&#039;, false],
                [&#039;677E2553DD4D43B09DA77414DB1EB8EA&#039;, true],
                [&#039;{5ba3bba3-729a-4717-88c1-b7c4b7ba80db}&#039;, false],
                [&#039;{7e9081b59a6d4cc1a8c347f69fb4198d}&#039;, true],
                [&#039;0c74f13f-fa83-4c48-9b33-68921dd72463&#039;, false],
                [&#039;b4b2fb69c6244e5eb0698e0c6ec66618&#039;, true],
                [&#039;{283B67B2-430F-4E6F-97E6-19041992-C1B0}&#039;, false],
                [&#039;{D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D&#039;, true],
                [&#039;D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D}&#039;, false],
                [&#039;&#039;, true],
                [null, false]
            ], done);
        });

        it(&#039;validates combination of guid, min, max, allow, invalid and regex&#039;, function (done) {

            var rule = Joi.string().guid().min(32).max(34).allow(&#039;{D1A5279D-B27D-4CD4-A05E-EFDD53D08&#039;).invalid(&#039;b4b2fb69c6244e5eb0698e0c6ec66618&#039;).regex(/^{7e908/);
            Helper.validate(rule, [
                [&#039;{D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D}&#039;, false],
                [&#039;{B59511BD6A5F4DF09ECF562A108D8A2E}&#039;, false],
                [&#039;69593D62-71EA-4548-85E4-04FC71357423&#039;, false],
                [&#039;677E2553DD4D43B09DA77414DB1EB8EA&#039;, false],
                [&#039;{5ba3bba3-729a-4717-88c1-b7c4b7ba80db}&#039;, false],
                [&#039;{7e9081b59a6d4cc1a8c347f69fb4198d}&#039;, true],
                [&#039;0c74f13f-fa83-4c48-9b33-68921dd72463&#039;, false],
                [&#039;b4b2fb69c6244e5eb0698e0c6ec66618&#039;, false],
                [&#039;{283B67B2-430F-4E6F-97E6-19041992-C1B0}&#039;, false],
                [&#039;{D1A5279D-B27D-4CD4-A05E-EFDD53D08&#039;, true],
                [&#039;D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D}&#039;, false],
                [&#039;&#039;, false],
                [null, false]
            ], done);
        });

        it(&#039;validates combination of guid, min, max, allow, invalid, regex and allow(\&#039;\&#039;)&#039;, function (done) {

            var rule = Joi.string().guid().min(32).max(34).allow(&#039;{D1A5279D-B27D-4CD4-A05E-EFDD53D08&#039;).invalid(&#039;b4b2fb69c6244e5eb0698e0c6ec66618&#039;).regex(/^{7e908/).allow(&#039;&#039;);
            Helper.validate(rule, [
                [&#039;{D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D}&#039;, false],
                [&#039;{B59511BD6A5F4DF09ECF562A108D8A2E}&#039;, false],
                [&#039;69593D62-71EA-4548-85E4-04FC71357423&#039;, false],
                [&#039;677E2553DD4D43B09DA77414DB1EB8EA&#039;, false],
                [&#039;{5ba3bba3-729a-4717-88c1-b7c4b7ba80db}&#039;, false],
                [&#039;{7e9081b59a6d4cc1a8c347f69fb4198d}&#039;, true],
                [&#039;0c74f13f-fa83-4c48-9b33-68921dd72463&#039;, false],
                [&#039;b4b2fb69c6244e5eb0698e0c6ec66618&#039;, false],
                [&#039;{283B67B2-430F-4E6F-97E6-19041992-C1B0}&#039;, false],
                [&#039;{D1A5279D-B27D-4CD4-A05E-EFDD53D08&#039;, true],
                [&#039;D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D}&#039;, false],
                [&#039;&#039;, true],
                [null, false]
            ], done);
        });

        it(&#039;validates combination of guid, min, max and allow(\&#039;\&#039;)&#039;, function (done) {

            var rule = Joi.string().guid().min(32).max(34).allow(&#039;&#039;);
            Helper.validate(rule, [
                [&#039;{D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D}&#039;, false],
                [&#039;{B59511BD6A5F4DF09ECF562A108D8A2E}&#039;, true],
                [&#039;69593D62-71EA-4548-85E4-04FC71357423&#039;, false],
                [&#039;677E2553DD4D43B09DA77414DB1EB8EA&#039;, true],
                [&#039;{5ba3bba3-729a-4717-88c1-b7c4b7ba80db}&#039;, false],
                [&#039;{7e9081b59a6d4cc1a8c347f69fb4198d}&#039;, true],
                [&#039;0c74f13f-fa83-4c48-9b33-68921dd72463&#039;, false],
                [&#039;b4b2fb69c6244e5eb0698e0c6ec66618&#039;, true],
                [&#039;{283B67B2-430F-4E6F-97E6-19041992-C1B0}&#039;, false],
                [&#039;{D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D&#039;, false],
                [&#039;D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D}&#039;, false],
                [&#039;&#039;, true],
                [null, false]
            ], done);
        });

        it(&#039;validates combination of guid, min, max and regex&#039;, function (done) {

            var rule = Joi.string().guid().min(32).max(34).regex(/^{7e9081/i);
            Helper.validate(rule, [
                [&#039;{D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D}&#039;, false],
                [&#039;{B59511BD6A5F4DF09ECF562A108D8A2E}&#039;, false],
                [&#039;69593D62-71EA-4548-85E4-04FC71357423&#039;, false],
                [&#039;677E2553DD4D43B09DA77414DB1EB8EA&#039;, false],
                [&#039;{5ba3bba3-729a-4717-88c1-b7c4b7ba80db}&#039;, false],
                [&#039;{7e9081b59a6d4cc1a8c347f69fb4198d}&#039;, true],
                [&#039;0c74f13f-fa83-4c48-9b33-68921dd72463&#039;, false],
                [&#039;b4b2fb69c6244e5eb0698e0c6ec66618&#039;, false],
                [&#039;{283B67B2-430F-4E6F-97E6-19041992-C1B0}&#039;, false],
                [&#039;{D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D&#039;, false],
                [&#039;D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D}&#039;, false],
                [&#039;&#039;, false],
                [null, false]
            ], done);
        });

        it(&#039;validates combination of guid, min, max, regex and allow(\&#039;\&#039;)&#039;, function (done) {

            var rule = Joi.string().guid().min(32).max(34).regex(/^{7e9081/i).allow(&#039;&#039;);
            Helper.validate(rule, [
                [&#039;{D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D}&#039;, false],
                [&#039;{B59511BD6A5F4DF09ECF562A108D8A2E}&#039;, false],
                [&#039;69593D62-71EA-4548-85E4-04FC71357423&#039;, false],
                [&#039;677E2553DD4D43B09DA77414DB1EB8EA&#039;, false],
                [&#039;{5ba3bba3-729a-4717-88c1-b7c4b7ba80db}&#039;, false],
                [&#039;{7e9081b59a6d4cc1a8c347f69fb4198d}&#039;, true],
                [&#039;0c74f13f-fa83-4c48-9b33-68921dd72463&#039;, false],
                [&#039;b4b2fb69c6244e5eb0698e0c6ec66618&#039;, false],
                [&#039;{283B67B2-430F-4E6F-97E6-19041992-C1B0}&#039;, false],
                [&#039;{D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D&#039;, false],
                [&#039;D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D}&#039;, false],
                [&#039;&#039;, true],
                [null, false]
            ], done);
        });

        it(&#039;validates combination of guid, min, max, regex and required&#039;, function (done) {

            var rule = Joi.string().guid().min(32).max(34).regex(/^{7e9081/i).required();
            Helper.validate(rule, [
                [&#039;{D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D}&#039;, false],
                [&#039;{B59511BD6A5F4DF09ECF562A108D8A2E}&#039;, false],
                [&#039;69593D62-71EA-4548-85E4-04FC71357423&#039;, false],
                [&#039;677E2553DD4D43B09DA77414DB1EB8EA&#039;, false],
                [&#039;{5ba3bba3-729a-4717-88c1-b7c4b7ba80db}&#039;, false],
                [&#039;{7e9081b59a6d4cc1a8c347f69fb4198d}&#039;, true],
                [&#039;0c74f13f-fa83-4c48-9b33-68921dd72463&#039;, false],
                [&#039;b4b2fb69c6244e5eb0698e0c6ec66618&#039;, false],
                [&#039;{283B67B2-430F-4E6F-97E6-19041992-C1B0}&#039;, false],
                [&#039;{D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D&#039;, false],
                [&#039;D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D}&#039;, false],
                [&#039;&#039;, false],
                [null, false]
            ], done);
        });

        it(&#039;validates an hexadecimal string&#039;, function (done) {

            var rule = Joi.string().hex();
            Helper.validate(rule, [
                [&#039;123456789abcdef&#039;, true],
                [&#039;123456789AbCdEf&#039;, true],
                [&#039;123afg&#039;, false, null, &#039;&quot;value&quot; must only contain hexadecimal characters&#039;]
            ], done);
        });
    });
});</textarea>
  </div>
</div>

<footer class="footer">
  <div class="container">
    <p>.</p>
  </div>
</footer>

<script type="text/html" id="complexity-popover-template">
  <div class="complexity-notice">
    Complexity : {{ cyclomatic }} <br>
    Length : {{ halstead.length }} <br>
    Difficulty : {{ halstead.difficulty.toFixed(2) }} <br>
    Est # bugs : {{ halstead.bugs.toFixed(2) }}<br>
  </div>
</script>

<script type="text/javascript" src="../../assets/scripts/bundles/core-bundle.js"></script>
<script type="text/javascript" src="../../assets/scripts/bundles/codemirror.js"></script>
<script type="text/javascript" src="../../assets/scripts/codemirror.markpopovertext.js"></script>
<script type="text/javascript" src="report.js"></script>
<script type="text/javascript" src="report.history.js"></script>
<script type="text/javascript" src="../../assets/scripts/plato-file.js"></script>
</body>
</html>
